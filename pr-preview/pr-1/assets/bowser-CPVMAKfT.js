import{c3 as Lr,c0 as Wr,c1 as cr,c4 as jr}from"./index-KiIbDDF1.js";var Ue={},J={};Object.defineProperty(J,"__esModule",{value:!0});var ur=J.getLocalStorage=J.getLocalStorageOrThrow=J.getCrypto=J.getCryptoOrThrow=dr=J.getLocation=J.getLocationOrThrow=lr=J.getNavigator=J.getNavigatorOrThrow=J.getDocument=J.getDocumentOrThrow=J.getFromWindowOrThrow=J.getFromWindow=void 0;function he(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}J.getFromWindow=he;function le(e){const t=he(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}J.getFromWindowOrThrow=le;function Ur(){return le("document")}J.getDocumentOrThrow=Ur;function Dr(){return he("document")}J.getDocument=Dr;function Hr(){return le("navigator")}J.getNavigatorOrThrow=Hr;function zr(){return he("navigator")}var lr=J.getNavigator=zr;function Vr(){return le("location")}J.getLocationOrThrow=Vr;function $r(){return he("location")}var dr=J.getLocation=$r;function Kr(){return le("crypto")}J.getCryptoOrThrow=Kr;function Gr(){return he("crypto")}J.getCrypto=Gr;function Jr(){return le("localStorage")}J.getLocalStorageOrThrow=Jr;function Zr(){return he("localStorage")}ur=J.getLocalStorage=Zr;Object.defineProperty(Ue,"__esModule",{value:!0});var pr=Ue.getWindowMetadata=void 0;const Ze=J;function Qr(){let e,t;try{e=Ze.getDocumentOrThrow(),t=Ze.getLocationOrThrow()}catch{return null}function r(){const z=e.getElementsByTagName("link"),D=[];for(let V=0;V<z.length;V++){const $=z[V],Et=$.getAttribute("rel");if(Et&&Et.toLowerCase().indexOf("icon")>-1){const w=$.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let S=t.protocol+"//"+t.host;if(w.indexOf("/")===0)S+=w;else{const N=t.pathname.split("/");N.pop();const A=N.join("/");S+=A+"/"+w}D.push(S)}else if(w.indexOf("//")===0){const S=t.protocol+w;D.push(S)}else D.push(w)}}return D}function a(...z){const D=e.getElementsByTagName("meta");for(let V=0;V<D.length;V++){const $=D[V],Et=["itemprop","property","name"].map(w=>$.getAttribute(w)).filter(w=>w?z.includes(w):!1);if(Et.length&&Et){const w=$.getAttribute("content");if(w)return w}}return""}function g(){let z=a("name","og:site_name","og:title","twitter:title");return z||(z=e.title),z}function f(){return a("description","og:description","twitter:description","keywords")}const x=g(),T=f(),E=t.origin,R=r();return{description:T,url:E,icons:R,name:x}}pr=Ue.getWindowMetadata=Qr;var Xr=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),g=0,t=0;t<r;t++)for(var f=arguments[t],x=0,T=f.length;x<T;x++,g++)a[g]=f[x];return a},Yr=function(){function e(t,r,a){this.name=t,this.version=r,this.os=a,this.type="browser"}return e}(),tn=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),en=function(){function e(t,r,a,g){this.name=t,this.version=r,this.os=a,this.bot=g,this.type="bot-device"}return e}(),rn=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),nn=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),sn=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,on=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Qe=3,an=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",sn]],Xe=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function hn(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new nn:typeof navigator<"u"?cn(navigator.userAgent):ln()}function fn(e){return e!==""&&an.reduce(function(t,r){var a=r[0],g=r[1];if(t)return t;var f=g.exec(e);return!!f&&[a,f]},!1)}function cn(e){var t=fn(e);if(!t)return null;var r=t[0],a=t[1];if(r==="searchbot")return new rn;var g=a[1]&&a[1].split(/[._]/).slice(0,3);g?g.length<Qe&&(g=Xr(g,dn(Qe-g.length))):g=[];var f=g.join("."),x=un(e),T=on.exec(e);return T&&T[1]?new en(r,f,x,T[1]):new Yr(r,f,x)}function un(e){for(var t=0,r=Xe.length;t<r;t++){var a=Xe[t],g=a[0],f=a[1],x=f.exec(e);if(x)return g}return null}function ln(){var e=typeof process<"u"&&process.version;return e?new tn(process.version.slice(1)):null}function dn(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}function De(e){return hn()}function He(){const e=De();return e&&e.os?e.os:void 0}function pn(){const e=He();return e?e.toLowerCase().includes("android"):!1}function gn(){const e=He();return e?e.toLowerCase().includes("ios")||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function mn(){return He()?pn()||gn():!1}function vn(){const e=De();return e&&e.name?e.name.toLowerCase()==="node":!1}function yn(){return!vn()&&!!wn()}const wn=lr,bn=dr,ze=ur;function Ye(){return pr()}function Mn(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return JSON.parse(e)}catch{return e}}function _n(e){return typeof e=="string"?e:JSON.stringify(e)}const Sn=Mn,xn=_n;function kn(e,t){const r=xn(t),a=ze();a&&a.setItem(e,r)}function gr(e){let t=null,r=null;const a=ze();return a&&(r=a.getItem(e)),t=r&&Sn(r),t}function mr(e){const t=ze();t&&t.removeItem(e)}const tr="WALLETCONNECT_DEEPLINK_CHOICE",On=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],vr=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];var Ve={exports:{}};Ve.exports;(function(e){(function(t,r){function a(p,n){if(!p)throw new Error(n||"Assertion failed")}function g(p,n){p.super_=n;var s=function(){};s.prototype=n.prototype,p.prototype=new s,p.prototype.constructor=p}function f(p,n,s){if(f.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((n==="le"||n==="be")&&(s=n,n=10),this._init(p||0,n||10,s||"be"))}typeof t=="object"?t.exports=f:r.BN=f,f.BN=f,f.wordSize=26;var x;try{x=Lr.Buffer}catch{}f.isBN=function(n){return n instanceof f?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===f.wordSize&&Array.isArray(n.words)},f.max=function(n,s){return n.cmp(s)>0?n:s},f.min=function(n,s){return n.cmp(s)<0?n:s},f.prototype._init=function(n,s,h){if(typeof n=="number")return this._initNumber(n,s,h);if(typeof n=="object")return this._initArray(n,s,h);s==="hex"&&(s=16),a(s===(s|0)&&s>=2&&s<=36),n=n.toString().replace(/\s+/g,"");var c=0;n[0]==="-"&&c++,s===16?this._parseHex(n,c):this._parseBase(n,s,c),n[0]==="-"&&(this.negative=1),this.strip(),h==="le"&&this._initArray(this.toArray(),s,h)},f.prototype._initNumber=function(n,s,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(a(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),s,h)},f.prototype._initArray=function(n,s,h){if(a(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var d,m,v=0;if(h==="be")for(c=n.length-1,d=0;c>=0;c-=3)m=n[c]|n[c-1]<<8|n[c-2]<<16,this.words[d]|=m<<v&67108863,this.words[d+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,d++);else if(h==="le")for(c=0,d=0;c<n.length;c+=3)m=n[c]|n[c+1]<<8|n[c+2]<<16,this.words[d]|=m<<v&67108863,this.words[d+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,d++);return this.strip()};function T(p,n,s){for(var h=0,c=Math.min(p.length,s),d=n;d<c;d++){var m=p.charCodeAt(d)-48;h<<=4,m>=49&&m<=54?h|=m-49+10:m>=17&&m<=22?h|=m-17+10:h|=m&15}return h}f.prototype._parseHex=function(n,s){this.length=Math.ceil((n.length-s)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var c,d,m=0;for(h=n.length-6,c=0;h>=s;h-=6)d=T(n,h,h+6),this.words[c]|=d<<m&67108863,this.words[c+1]|=d>>>26-m&4194303,m+=24,m>=26&&(m-=26,c++);h+6!==s&&(d=T(n,s,h+6),this.words[c]|=d<<m&67108863,this.words[c+1]|=d>>>26-m&4194303),this.strip()};function E(p,n,s,h){for(var c=0,d=Math.min(p.length,s),m=n;m<d;m++){var v=p.charCodeAt(m)-48;c*=h,v>=49?c+=v-49+10:v>=17?c+=v-17+10:c+=v}return c}f.prototype._parseBase=function(n,s,h){this.words=[0],this.length=1;for(var c=0,d=1;d<=67108863;d*=s)c++;c--,d=d/s|0;for(var m=n.length-h,v=m%c,u=Math.min(m,m-v)+h,i=0,l=h;l<u;l+=c)i=E(n,l,l+c,s),this.imuln(d),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(v!==0){var F=1;for(i=E(n,l,n.length,s),l=0;l<v;l++)F*=s;this.imuln(F),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}},f.prototype.copy=function(n){n.words=new Array(this.length);for(var s=0;s<this.length;s++)n.words[s]=this.words[s];n.length=this.length,n.negative=this.negative,n.red=this.red},f.prototype.clone=function(){var n=new f(null);return this.copy(n),n},f.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},f.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var R=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],H=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(n,s){n=n||10,s=s|0||1;var h;if(n===16||n==="hex"){h="";for(var c=0,d=0,m=0;m<this.length;m++){var v=this.words[m],u=((v<<c|d)&16777215).toString(16);d=v>>>24-c&16777215,d!==0||m!==this.length-1?h=R[6-u.length]+u+h:h=u+h,c+=2,c>=26&&(c-=26,m--)}for(d!==0&&(h=d.toString(16)+h);h.length%s!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var i=H[n],l=z[n];h="";var F=this.clone();for(F.negative=0;!F.isZero();){var O=F.modn(l).toString(n);F=F.idivn(l),F.isZero()?h=O+h:h=R[i-O.length]+O+h}for(this.isZero()&&(h="0"+h);h.length%s!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}a(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(n,s){return a(typeof x<"u"),this.toArrayLike(x,n,s)},f.prototype.toArray=function(n,s){return this.toArrayLike(Array,n,s)},f.prototype.toArrayLike=function(n,s,h){var c=this.byteLength(),d=h||Math.max(1,c);a(c<=d,"byte array longer than desired length"),a(d>0,"Requested array length <= 0"),this.strip();var m=s==="le",v=new n(d),u,i,l=this.clone();if(m){for(i=0;!l.isZero();i++)u=l.andln(255),l.iushrn(8),v[i]=u;for(;i<d;i++)v[i]=0}else{for(i=0;i<d-c;i++)v[i]=0;for(i=0;!l.isZero();i++)u=l.andln(255),l.iushrn(8),v[d-i-1]=u}return v},Math.clz32?f.prototype._countBits=function(n){return 32-Math.clz32(n)}:f.prototype._countBits=function(n){var s=n,h=0;return s>=4096&&(h+=13,s>>>=13),s>=64&&(h+=7,s>>>=7),s>=8&&(h+=4,s>>>=4),s>=2&&(h+=2,s>>>=2),h+s},f.prototype._zeroBits=function(n){if(n===0)return 26;var s=n,h=0;return s&8191||(h+=13,s>>>=13),s&127||(h+=7,s>>>=7),s&15||(h+=4,s>>>=4),s&3||(h+=2,s>>>=2),s&1||h++,h},f.prototype.bitLength=function(){var n=this.words[this.length-1],s=this._countBits(n);return(this.length-1)*26+s};function D(p){for(var n=new Array(p.bitLength()),s=0;s<n.length;s++){var h=s/26|0,c=s%26;n[s]=(p.words[h]&1<<c)>>>c}return n}f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,s=0;s<this.length;s++){var h=this._zeroBits(this.words[s]);if(n+=h,h!==26)break}return n},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},f.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return this.negative!==0},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var s=0;s<n.length;s++)this.words[s]=this.words[s]|n.words[s];return this.strip()},f.prototype.ior=function(n){return a((this.negative|n.negative)===0),this.iuor(n)},f.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},f.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},f.prototype.iuand=function(n){var s;this.length>n.length?s=n:s=this;for(var h=0;h<s.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=s.length,this.strip()},f.prototype.iand=function(n){return a((this.negative|n.negative)===0),this.iuand(n)},f.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},f.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},f.prototype.iuxor=function(n){var s,h;this.length>n.length?(s=this,h=n):(s=n,h=this);for(var c=0;c<h.length;c++)this.words[c]=s.words[c]^h.words[c];if(this!==s)for(;c<s.length;c++)this.words[c]=s.words[c];return this.length=s.length,this.strip()},f.prototype.ixor=function(n){return a((this.negative|n.negative)===0),this.iuxor(n)},f.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},f.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},f.prototype.inotn=function(n){a(typeof n=="number"&&n>=0);var s=Math.ceil(n/26)|0,h=n%26;this._expand(s),h>0&&s--;for(var c=0;c<s;c++)this.words[c]=~this.words[c]&67108863;return h>0&&(this.words[c]=~this.words[c]&67108863>>26-h),this.strip()},f.prototype.notn=function(n){return this.clone().inotn(n)},f.prototype.setn=function(n,s){a(typeof n=="number"&&n>=0);var h=n/26|0,c=n%26;return this._expand(h+1),s?this.words[h]=this.words[h]|1<<c:this.words[h]=this.words[h]&~(1<<c),this.strip()},f.prototype.iadd=function(n){var s;if(this.negative!==0&&n.negative===0)return this.negative=0,s=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,s=this.isub(n),n.negative=1,s._normSign();var h,c;this.length>n.length?(h=this,c=n):(h=n,c=this);for(var d=0,m=0;m<c.length;m++)s=(h.words[m]|0)+(c.words[m]|0)+d,this.words[m]=s&67108863,d=s>>>26;for(;d!==0&&m<h.length;m++)s=(h.words[m]|0)+d,this.words[m]=s&67108863,d=s>>>26;if(this.length=h.length,d!==0)this.words[this.length]=d,this.length++;else if(h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this},f.prototype.add=function(n){var s;return n.negative!==0&&this.negative===0?(n.negative=0,s=this.sub(n),n.negative^=1,s):n.negative===0&&this.negative!==0?(this.negative=0,s=n.sub(this),this.negative=1,s):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},f.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var s=this.iadd(n);return n.negative=1,s._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var c,d;h>0?(c=this,d=n):(c=n,d=this);for(var m=0,v=0;v<d.length;v++)s=(c.words[v]|0)-(d.words[v]|0)+m,m=s>>26,this.words[v]=s&67108863;for(;m!==0&&v<c.length;v++)s=(c.words[v]|0)+m,m=s>>26,this.words[v]=s&67108863;if(m===0&&v<c.length&&c!==this)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=Math.max(this.length,v),c!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(n){return this.clone().isub(n)};function V(p,n,s){s.negative=n.negative^p.negative;var h=p.length+n.length|0;s.length=h,h=h-1|0;var c=p.words[0]|0,d=n.words[0]|0,m=c*d,v=m&67108863,u=m/67108864|0;s.words[0]=v;for(var i=1;i<h;i++){for(var l=u>>>26,F=u&67108863,O=Math.min(i,n.length-1),P=Math.max(0,i-p.length+1);P<=O;P++){var L=i-P|0;c=p.words[L]|0,d=n.words[P]|0,m=c*d+F,l+=m/67108864|0,F=m&67108863}s.words[i]=F|0,u=l|0}return u!==0?s.words[i]=u|0:s.length--,s.strip()}var $=function(n,s,h){var c=n.words,d=s.words,m=h.words,v=0,u,i,l,F=c[0]|0,O=F&8191,P=F>>>13,L=c[1]|0,o=L&8191,y=L>>>13,_=c[2]|0,b=_&8191,k=_>>>13,q=c[3]|0,B=q&8191,I=q>>>13,Rt=c[4]|0,C=Rt&8191,j=Rt>>>13,$t=c[5]|0,Z=$t&8191,Q=$t>>>13,Kt=c[6]|0,X=Kt&8191,Y=Kt>>>13,Gt=c[7]|0,tt=Gt&8191,et=Gt>>>13,Jt=c[8]|0,rt=Jt&8191,nt=Jt>>>13,Zt=c[9]|0,it=Zt&8191,st=Zt>>>13,Qt=d[0]|0,ot=Qt&8191,at=Qt>>>13,Xt=d[1]|0,ht=Xt&8191,ft=Xt>>>13,Yt=d[2]|0,ct=Yt&8191,ut=Yt>>>13,te=d[3]|0,lt=te&8191,dt=te>>>13,ee=d[4]|0,pt=ee&8191,gt=ee>>>13,re=d[5]|0,mt=re&8191,vt=re>>>13,ne=d[6]|0,yt=ne&8191,wt=ne>>>13,ie=d[7]|0,bt=ie&8191,Mt=ie>>>13,se=d[8]|0,_t=se&8191,St=se>>>13,oe=d[9]|0,xt=oe&8191,kt=oe>>>13;h.negative=n.negative^s.negative,h.length=19,u=Math.imul(O,ot),i=Math.imul(O,at),i=i+Math.imul(P,ot)|0,l=Math.imul(P,at);var Ft=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,u=Math.imul(o,ot),i=Math.imul(o,at),i=i+Math.imul(y,ot)|0,l=Math.imul(y,at),u=u+Math.imul(O,ht)|0,i=i+Math.imul(O,ft)|0,i=i+Math.imul(P,ht)|0,l=l+Math.imul(P,ft)|0;var Pt=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,u=Math.imul(b,ot),i=Math.imul(b,at),i=i+Math.imul(k,ot)|0,l=Math.imul(k,at),u=u+Math.imul(o,ht)|0,i=i+Math.imul(o,ft)|0,i=i+Math.imul(y,ht)|0,l=l+Math.imul(y,ft)|0,u=u+Math.imul(O,ct)|0,i=i+Math.imul(O,ut)|0,i=i+Math.imul(P,ct)|0,l=l+Math.imul(P,ut)|0;var qt=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,u=Math.imul(B,ot),i=Math.imul(B,at),i=i+Math.imul(I,ot)|0,l=Math.imul(I,at),u=u+Math.imul(b,ht)|0,i=i+Math.imul(b,ft)|0,i=i+Math.imul(k,ht)|0,l=l+Math.imul(k,ft)|0,u=u+Math.imul(o,ct)|0,i=i+Math.imul(o,ut)|0,i=i+Math.imul(y,ct)|0,l=l+Math.imul(y,ut)|0,u=u+Math.imul(O,lt)|0,i=i+Math.imul(O,dt)|0,i=i+Math.imul(P,lt)|0,l=l+Math.imul(P,dt)|0;var Lt=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,u=Math.imul(C,ot),i=Math.imul(C,at),i=i+Math.imul(j,ot)|0,l=Math.imul(j,at),u=u+Math.imul(B,ht)|0,i=i+Math.imul(B,ft)|0,i=i+Math.imul(I,ht)|0,l=l+Math.imul(I,ft)|0,u=u+Math.imul(b,ct)|0,i=i+Math.imul(b,ut)|0,i=i+Math.imul(k,ct)|0,l=l+Math.imul(k,ut)|0,u=u+Math.imul(o,lt)|0,i=i+Math.imul(o,dt)|0,i=i+Math.imul(y,lt)|0,l=l+Math.imul(y,dt)|0,u=u+Math.imul(O,pt)|0,i=i+Math.imul(O,gt)|0,i=i+Math.imul(P,pt)|0,l=l+Math.imul(P,gt)|0;var Wt=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,u=Math.imul(Z,ot),i=Math.imul(Z,at),i=i+Math.imul(Q,ot)|0,l=Math.imul(Q,at),u=u+Math.imul(C,ht)|0,i=i+Math.imul(C,ft)|0,i=i+Math.imul(j,ht)|0,l=l+Math.imul(j,ft)|0,u=u+Math.imul(B,ct)|0,i=i+Math.imul(B,ut)|0,i=i+Math.imul(I,ct)|0,l=l+Math.imul(I,ut)|0,u=u+Math.imul(b,lt)|0,i=i+Math.imul(b,dt)|0,i=i+Math.imul(k,lt)|0,l=l+Math.imul(k,dt)|0,u=u+Math.imul(o,pt)|0,i=i+Math.imul(o,gt)|0,i=i+Math.imul(y,pt)|0,l=l+Math.imul(y,gt)|0,u=u+Math.imul(O,mt)|0,i=i+Math.imul(O,vt)|0,i=i+Math.imul(P,mt)|0,l=l+Math.imul(P,vt)|0;var jt=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,u=Math.imul(X,ot),i=Math.imul(X,at),i=i+Math.imul(Y,ot)|0,l=Math.imul(Y,at),u=u+Math.imul(Z,ht)|0,i=i+Math.imul(Z,ft)|0,i=i+Math.imul(Q,ht)|0,l=l+Math.imul(Q,ft)|0,u=u+Math.imul(C,ct)|0,i=i+Math.imul(C,ut)|0,i=i+Math.imul(j,ct)|0,l=l+Math.imul(j,ut)|0,u=u+Math.imul(B,lt)|0,i=i+Math.imul(B,dt)|0,i=i+Math.imul(I,lt)|0,l=l+Math.imul(I,dt)|0,u=u+Math.imul(b,pt)|0,i=i+Math.imul(b,gt)|0,i=i+Math.imul(k,pt)|0,l=l+Math.imul(k,gt)|0,u=u+Math.imul(o,mt)|0,i=i+Math.imul(o,vt)|0,i=i+Math.imul(y,mt)|0,l=l+Math.imul(y,vt)|0,u=u+Math.imul(O,yt)|0,i=i+Math.imul(O,wt)|0,i=i+Math.imul(P,yt)|0,l=l+Math.imul(P,wt)|0;var Ut=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,u=Math.imul(tt,ot),i=Math.imul(tt,at),i=i+Math.imul(et,ot)|0,l=Math.imul(et,at),u=u+Math.imul(X,ht)|0,i=i+Math.imul(X,ft)|0,i=i+Math.imul(Y,ht)|0,l=l+Math.imul(Y,ft)|0,u=u+Math.imul(Z,ct)|0,i=i+Math.imul(Z,ut)|0,i=i+Math.imul(Q,ct)|0,l=l+Math.imul(Q,ut)|0,u=u+Math.imul(C,lt)|0,i=i+Math.imul(C,dt)|0,i=i+Math.imul(j,lt)|0,l=l+Math.imul(j,dt)|0,u=u+Math.imul(B,pt)|0,i=i+Math.imul(B,gt)|0,i=i+Math.imul(I,pt)|0,l=l+Math.imul(I,gt)|0,u=u+Math.imul(b,mt)|0,i=i+Math.imul(b,vt)|0,i=i+Math.imul(k,mt)|0,l=l+Math.imul(k,vt)|0,u=u+Math.imul(o,yt)|0,i=i+Math.imul(o,wt)|0,i=i+Math.imul(y,yt)|0,l=l+Math.imul(y,wt)|0,u=u+Math.imul(O,bt)|0,i=i+Math.imul(O,Mt)|0,i=i+Math.imul(P,bt)|0,l=l+Math.imul(P,Mt)|0;var Dt=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,u=Math.imul(rt,ot),i=Math.imul(rt,at),i=i+Math.imul(nt,ot)|0,l=Math.imul(nt,at),u=u+Math.imul(tt,ht)|0,i=i+Math.imul(tt,ft)|0,i=i+Math.imul(et,ht)|0,l=l+Math.imul(et,ft)|0,u=u+Math.imul(X,ct)|0,i=i+Math.imul(X,ut)|0,i=i+Math.imul(Y,ct)|0,l=l+Math.imul(Y,ut)|0,u=u+Math.imul(Z,lt)|0,i=i+Math.imul(Z,dt)|0,i=i+Math.imul(Q,lt)|0,l=l+Math.imul(Q,dt)|0,u=u+Math.imul(C,pt)|0,i=i+Math.imul(C,gt)|0,i=i+Math.imul(j,pt)|0,l=l+Math.imul(j,gt)|0,u=u+Math.imul(B,mt)|0,i=i+Math.imul(B,vt)|0,i=i+Math.imul(I,mt)|0,l=l+Math.imul(I,vt)|0,u=u+Math.imul(b,yt)|0,i=i+Math.imul(b,wt)|0,i=i+Math.imul(k,yt)|0,l=l+Math.imul(k,wt)|0,u=u+Math.imul(o,bt)|0,i=i+Math.imul(o,Mt)|0,i=i+Math.imul(y,bt)|0,l=l+Math.imul(y,Mt)|0,u=u+Math.imul(O,_t)|0,i=i+Math.imul(O,St)|0,i=i+Math.imul(P,_t)|0,l=l+Math.imul(P,St)|0;var Me=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,u=Math.imul(it,ot),i=Math.imul(it,at),i=i+Math.imul(st,ot)|0,l=Math.imul(st,at),u=u+Math.imul(rt,ht)|0,i=i+Math.imul(rt,ft)|0,i=i+Math.imul(nt,ht)|0,l=l+Math.imul(nt,ft)|0,u=u+Math.imul(tt,ct)|0,i=i+Math.imul(tt,ut)|0,i=i+Math.imul(et,ct)|0,l=l+Math.imul(et,ut)|0,u=u+Math.imul(X,lt)|0,i=i+Math.imul(X,dt)|0,i=i+Math.imul(Y,lt)|0,l=l+Math.imul(Y,dt)|0,u=u+Math.imul(Z,pt)|0,i=i+Math.imul(Z,gt)|0,i=i+Math.imul(Q,pt)|0,l=l+Math.imul(Q,gt)|0,u=u+Math.imul(C,mt)|0,i=i+Math.imul(C,vt)|0,i=i+Math.imul(j,mt)|0,l=l+Math.imul(j,vt)|0,u=u+Math.imul(B,yt)|0,i=i+Math.imul(B,wt)|0,i=i+Math.imul(I,yt)|0,l=l+Math.imul(I,wt)|0,u=u+Math.imul(b,bt)|0,i=i+Math.imul(b,Mt)|0,i=i+Math.imul(k,bt)|0,l=l+Math.imul(k,Mt)|0,u=u+Math.imul(o,_t)|0,i=i+Math.imul(o,St)|0,i=i+Math.imul(y,_t)|0,l=l+Math.imul(y,St)|0,u=u+Math.imul(O,xt)|0,i=i+Math.imul(O,kt)|0,i=i+Math.imul(P,xt)|0,l=l+Math.imul(P,kt)|0;var _e=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,u=Math.imul(it,ht),i=Math.imul(it,ft),i=i+Math.imul(st,ht)|0,l=Math.imul(st,ft),u=u+Math.imul(rt,ct)|0,i=i+Math.imul(rt,ut)|0,i=i+Math.imul(nt,ct)|0,l=l+Math.imul(nt,ut)|0,u=u+Math.imul(tt,lt)|0,i=i+Math.imul(tt,dt)|0,i=i+Math.imul(et,lt)|0,l=l+Math.imul(et,dt)|0,u=u+Math.imul(X,pt)|0,i=i+Math.imul(X,gt)|0,i=i+Math.imul(Y,pt)|0,l=l+Math.imul(Y,gt)|0,u=u+Math.imul(Z,mt)|0,i=i+Math.imul(Z,vt)|0,i=i+Math.imul(Q,mt)|0,l=l+Math.imul(Q,vt)|0,u=u+Math.imul(C,yt)|0,i=i+Math.imul(C,wt)|0,i=i+Math.imul(j,yt)|0,l=l+Math.imul(j,wt)|0,u=u+Math.imul(B,bt)|0,i=i+Math.imul(B,Mt)|0,i=i+Math.imul(I,bt)|0,l=l+Math.imul(I,Mt)|0,u=u+Math.imul(b,_t)|0,i=i+Math.imul(b,St)|0,i=i+Math.imul(k,_t)|0,l=l+Math.imul(k,St)|0,u=u+Math.imul(o,xt)|0,i=i+Math.imul(o,kt)|0,i=i+Math.imul(y,xt)|0,l=l+Math.imul(y,kt)|0;var Se=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,u=Math.imul(it,ct),i=Math.imul(it,ut),i=i+Math.imul(st,ct)|0,l=Math.imul(st,ut),u=u+Math.imul(rt,lt)|0,i=i+Math.imul(rt,dt)|0,i=i+Math.imul(nt,lt)|0,l=l+Math.imul(nt,dt)|0,u=u+Math.imul(tt,pt)|0,i=i+Math.imul(tt,gt)|0,i=i+Math.imul(et,pt)|0,l=l+Math.imul(et,gt)|0,u=u+Math.imul(X,mt)|0,i=i+Math.imul(X,vt)|0,i=i+Math.imul(Y,mt)|0,l=l+Math.imul(Y,vt)|0,u=u+Math.imul(Z,yt)|0,i=i+Math.imul(Z,wt)|0,i=i+Math.imul(Q,yt)|0,l=l+Math.imul(Q,wt)|0,u=u+Math.imul(C,bt)|0,i=i+Math.imul(C,Mt)|0,i=i+Math.imul(j,bt)|0,l=l+Math.imul(j,Mt)|0,u=u+Math.imul(B,_t)|0,i=i+Math.imul(B,St)|0,i=i+Math.imul(I,_t)|0,l=l+Math.imul(I,St)|0,u=u+Math.imul(b,xt)|0,i=i+Math.imul(b,kt)|0,i=i+Math.imul(k,xt)|0,l=l+Math.imul(k,kt)|0;var xe=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,u=Math.imul(it,lt),i=Math.imul(it,dt),i=i+Math.imul(st,lt)|0,l=Math.imul(st,dt),u=u+Math.imul(rt,pt)|0,i=i+Math.imul(rt,gt)|0,i=i+Math.imul(nt,pt)|0,l=l+Math.imul(nt,gt)|0,u=u+Math.imul(tt,mt)|0,i=i+Math.imul(tt,vt)|0,i=i+Math.imul(et,mt)|0,l=l+Math.imul(et,vt)|0,u=u+Math.imul(X,yt)|0,i=i+Math.imul(X,wt)|0,i=i+Math.imul(Y,yt)|0,l=l+Math.imul(Y,wt)|0,u=u+Math.imul(Z,bt)|0,i=i+Math.imul(Z,Mt)|0,i=i+Math.imul(Q,bt)|0,l=l+Math.imul(Q,Mt)|0,u=u+Math.imul(C,_t)|0,i=i+Math.imul(C,St)|0,i=i+Math.imul(j,_t)|0,l=l+Math.imul(j,St)|0,u=u+Math.imul(B,xt)|0,i=i+Math.imul(B,kt)|0,i=i+Math.imul(I,xt)|0,l=l+Math.imul(I,kt)|0;var ke=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,u=Math.imul(it,pt),i=Math.imul(it,gt),i=i+Math.imul(st,pt)|0,l=Math.imul(st,gt),u=u+Math.imul(rt,mt)|0,i=i+Math.imul(rt,vt)|0,i=i+Math.imul(nt,mt)|0,l=l+Math.imul(nt,vt)|0,u=u+Math.imul(tt,yt)|0,i=i+Math.imul(tt,wt)|0,i=i+Math.imul(et,yt)|0,l=l+Math.imul(et,wt)|0,u=u+Math.imul(X,bt)|0,i=i+Math.imul(X,Mt)|0,i=i+Math.imul(Y,bt)|0,l=l+Math.imul(Y,Mt)|0,u=u+Math.imul(Z,_t)|0,i=i+Math.imul(Z,St)|0,i=i+Math.imul(Q,_t)|0,l=l+Math.imul(Q,St)|0,u=u+Math.imul(C,xt)|0,i=i+Math.imul(C,kt)|0,i=i+Math.imul(j,xt)|0,l=l+Math.imul(j,kt)|0;var Oe=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,u=Math.imul(it,mt),i=Math.imul(it,vt),i=i+Math.imul(st,mt)|0,l=Math.imul(st,vt),u=u+Math.imul(rt,yt)|0,i=i+Math.imul(rt,wt)|0,i=i+Math.imul(nt,yt)|0,l=l+Math.imul(nt,wt)|0,u=u+Math.imul(tt,bt)|0,i=i+Math.imul(tt,Mt)|0,i=i+Math.imul(et,bt)|0,l=l+Math.imul(et,Mt)|0,u=u+Math.imul(X,_t)|0,i=i+Math.imul(X,St)|0,i=i+Math.imul(Y,_t)|0,l=l+Math.imul(Y,St)|0,u=u+Math.imul(Z,xt)|0,i=i+Math.imul(Z,kt)|0,i=i+Math.imul(Q,xt)|0,l=l+Math.imul(Q,kt)|0;var Re=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,u=Math.imul(it,yt),i=Math.imul(it,wt),i=i+Math.imul(st,yt)|0,l=Math.imul(st,wt),u=u+Math.imul(rt,bt)|0,i=i+Math.imul(rt,Mt)|0,i=i+Math.imul(nt,bt)|0,l=l+Math.imul(nt,Mt)|0,u=u+Math.imul(tt,_t)|0,i=i+Math.imul(tt,St)|0,i=i+Math.imul(et,_t)|0,l=l+Math.imul(et,St)|0,u=u+Math.imul(X,xt)|0,i=i+Math.imul(X,kt)|0,i=i+Math.imul(Y,xt)|0,l=l+Math.imul(Y,kt)|0;var Ae=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u=Math.imul(it,bt),i=Math.imul(it,Mt),i=i+Math.imul(st,bt)|0,l=Math.imul(st,Mt),u=u+Math.imul(rt,_t)|0,i=i+Math.imul(rt,St)|0,i=i+Math.imul(nt,_t)|0,l=l+Math.imul(nt,St)|0,u=u+Math.imul(tt,xt)|0,i=i+Math.imul(tt,kt)|0,i=i+Math.imul(et,xt)|0,l=l+Math.imul(et,kt)|0;var Ie=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,u=Math.imul(it,_t),i=Math.imul(it,St),i=i+Math.imul(st,_t)|0,l=Math.imul(st,St),u=u+Math.imul(rt,xt)|0,i=i+Math.imul(rt,kt)|0,i=i+Math.imul(nt,xt)|0,l=l+Math.imul(nt,kt)|0;var Ee=(v+u|0)+((i&8191)<<13)|0;v=(l+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,u=Math.imul(it,xt),i=Math.imul(it,kt),i=i+Math.imul(st,xt)|0,l=Math.imul(st,kt);var Be=(v+u|0)+((i&8191)<<13)|0;return v=(l+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,m[0]=Ft,m[1]=Pt,m[2]=qt,m[3]=Lt,m[4]=Wt,m[5]=jt,m[6]=Ut,m[7]=Dt,m[8]=Me,m[9]=_e,m[10]=Se,m[11]=xe,m[12]=ke,m[13]=Oe,m[14]=Re,m[15]=Ae,m[16]=Ie,m[17]=Ee,m[18]=Be,v!==0&&(m[19]=v,h.length++),h};Math.imul||($=V);function Et(p,n,s){s.negative=n.negative^p.negative,s.length=p.length+n.length;for(var h=0,c=0,d=0;d<s.length-1;d++){var m=c;c=0;for(var v=h&67108863,u=Math.min(d,n.length-1),i=Math.max(0,d-p.length+1);i<=u;i++){var l=d-i,F=p.words[l]|0,O=n.words[i]|0,P=F*O,L=P&67108863;m=m+(P/67108864|0)|0,L=L+v|0,v=L&67108863,m=m+(L>>>26)|0,c+=m>>>26,m&=67108863}s.words[d]=v,h=m,m=c}return h!==0?s.words[d]=h:s.length--,s.strip()}function w(p,n,s){var h=new S;return h.mulp(p,n,s)}f.prototype.mulTo=function(n,s){var h,c=this.length+n.length;return this.length===10&&n.length===10?h=$(this,n,s):c<63?h=V(this,n,s):c<1024?h=Et(this,n,s):h=w(this,n,s),h};function S(p,n){this.x=p,this.y=n}S.prototype.makeRBT=function(n){for(var s=new Array(n),h=f.prototype._countBits(n)-1,c=0;c<n;c++)s[c]=this.revBin(c,h,n);return s},S.prototype.revBin=function(n,s,h){if(n===0||n===h-1)return n;for(var c=0,d=0;d<s;d++)c|=(n&1)<<s-d-1,n>>=1;return c},S.prototype.permute=function(n,s,h,c,d,m){for(var v=0;v<m;v++)c[v]=s[n[v]],d[v]=h[n[v]]},S.prototype.transform=function(n,s,h,c,d,m){this.permute(m,n,s,h,c,d);for(var v=1;v<d;v<<=1)for(var u=v<<1,i=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),F=0;F<d;F+=u)for(var O=i,P=l,L=0;L<v;L++){var o=h[F+L],y=c[F+L],_=h[F+L+v],b=c[F+L+v],k=O*_-P*b;b=O*b+P*_,_=k,h[F+L]=o+_,c[F+L]=y+b,h[F+L+v]=o-_,c[F+L+v]=y-b,L!==u&&(k=i*O-l*P,P=i*P+l*O,O=k)}},S.prototype.guessLen13b=function(n,s){var h=Math.max(s,n)|1,c=h&1,d=0;for(h=h/2|0;h;h=h>>>1)d++;return 1<<d+1+c},S.prototype.conjugate=function(n,s,h){if(!(h<=1))for(var c=0;c<h/2;c++){var d=n[c];n[c]=n[h-c-1],n[h-c-1]=d,d=s[c],s[c]=-s[h-c-1],s[h-c-1]=-d}},S.prototype.normalize13b=function(n,s){for(var h=0,c=0;c<s/2;c++){var d=Math.round(n[2*c+1]/s)*8192+Math.round(n[2*c]/s)+h;n[c]=d&67108863,d<67108864?h=0:h=d/67108864|0}return n},S.prototype.convert13b=function(n,s,h,c){for(var d=0,m=0;m<s;m++)d=d+(n[m]|0),h[2*m]=d&8191,d=d>>>13,h[2*m+1]=d&8191,d=d>>>13;for(m=2*s;m<c;++m)h[m]=0;a(d===0),a((d&-8192)===0)},S.prototype.stub=function(n){for(var s=new Array(n),h=0;h<n;h++)s[h]=0;return s},S.prototype.mulp=function(n,s,h){var c=2*this.guessLen13b(n.length,s.length),d=this.makeRBT(c),m=this.stub(c),v=new Array(c),u=new Array(c),i=new Array(c),l=new Array(c),F=new Array(c),O=new Array(c),P=h.words;P.length=c,this.convert13b(n.words,n.length,v,c),this.convert13b(s.words,s.length,l,c),this.transform(v,m,u,i,c,d),this.transform(l,m,F,O,c,d);for(var L=0;L<c;L++){var o=u[L]*F[L]-i[L]*O[L];i[L]=u[L]*O[L]+i[L]*F[L],u[L]=o}return this.conjugate(u,i,c),this.transform(u,i,P,m,c,d),this.conjugate(P,m,c),this.normalize13b(P,c),h.negative=n.negative^s.negative,h.length=n.length+s.length,h.strip()},f.prototype.mul=function(n){var s=new f(null);return s.words=new Array(this.length+n.length),this.mulTo(n,s)},f.prototype.mulf=function(n){var s=new f(null);return s.words=new Array(this.length+n.length),w(this,n,s)},f.prototype.imul=function(n){return this.clone().mulTo(n,this)},f.prototype.imuln=function(n){a(typeof n=="number"),a(n<67108864);for(var s=0,h=0;h<this.length;h++){var c=(this.words[h]|0)*n,d=(c&67108863)+(s&67108863);s>>=26,s+=c/67108864|0,s+=d>>>26,this.words[h]=d&67108863}return s!==0&&(this.words[h]=s,this.length++),this},f.prototype.muln=function(n){return this.clone().imuln(n)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(n){var s=D(n);if(s.length===0)return new f(1);for(var h=this,c=0;c<s.length&&s[c]===0;c++,h=h.sqr());if(++c<s.length)for(var d=h.sqr();c<s.length;c++,d=d.sqr())s[c]!==0&&(h=h.mul(d));return h},f.prototype.iushln=function(n){a(typeof n=="number"&&n>=0);var s=n%26,h=(n-s)/26,c=67108863>>>26-s<<26-s,d;if(s!==0){var m=0;for(d=0;d<this.length;d++){var v=this.words[d]&c,u=(this.words[d]|0)-v<<s;this.words[d]=u|m,m=v>>>26-s}m&&(this.words[d]=m,this.length++)}if(h!==0){for(d=this.length-1;d>=0;d--)this.words[d+h]=this.words[d];for(d=0;d<h;d++)this.words[d]=0;this.length+=h}return this.strip()},f.prototype.ishln=function(n){return a(this.negative===0),this.iushln(n)},f.prototype.iushrn=function(n,s,h){a(typeof n=="number"&&n>=0);var c;s?c=(s-s%26)/26:c=0;var d=n%26,m=Math.min((n-d)/26,this.length),v=67108863^67108863>>>d<<d,u=h;if(c-=m,c=Math.max(0,c),u){for(var i=0;i<m;i++)u.words[i]=this.words[i];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,i=0;i<this.length;i++)this.words[i]=this.words[i+m];else this.words[0]=0,this.length=1;var l=0;for(i=this.length-1;i>=0&&(l!==0||i>=c);i--){var F=this.words[i]|0;this.words[i]=l<<26-d|F>>>d,l=F&v}return u&&l!==0&&(u.words[u.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(n,s,h){return a(this.negative===0),this.iushrn(n,s,h)},f.prototype.shln=function(n){return this.clone().ishln(n)},f.prototype.ushln=function(n){return this.clone().iushln(n)},f.prototype.shrn=function(n){return this.clone().ishrn(n)},f.prototype.ushrn=function(n){return this.clone().iushrn(n)},f.prototype.testn=function(n){a(typeof n=="number"&&n>=0);var s=n%26,h=(n-s)/26,c=1<<s;if(this.length<=h)return!1;var d=this.words[h];return!!(d&c)},f.prototype.imaskn=function(n){a(typeof n=="number"&&n>=0);var s=n%26,h=(n-s)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(s!==0&&h++,this.length=Math.min(h,this.length),s!==0){var c=67108863^67108863>>>s<<s;this.words[this.length-1]&=c}return this.strip()},f.prototype.maskn=function(n){return this.clone().imaskn(n)},f.prototype.iaddn=function(n){return a(typeof n=="number"),a(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},f.prototype._iaddn=function(n){this.words[0]+=n;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},f.prototype.isubn=function(n){if(a(typeof n=="number"),a(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},f.prototype.addn=function(n){return this.clone().iaddn(n)},f.prototype.subn=function(n){return this.clone().isubn(n)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(n,s,h){var c=n.length+h,d;this._expand(c);var m,v=0;for(d=0;d<n.length;d++){m=(this.words[d+h]|0)+v;var u=(n.words[d]|0)*s;m-=u&67108863,v=(m>>26)-(u/67108864|0),this.words[d+h]=m&67108863}for(;d<this.length-h;d++)m=(this.words[d+h]|0)+v,v=m>>26,this.words[d+h]=m&67108863;if(v===0)return this.strip();for(a(v===-1),v=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+v,v=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},f.prototype._wordDiv=function(n,s){var h=this.length-n.length,c=this.clone(),d=n,m=d.words[d.length-1]|0,v=this._countBits(m);h=26-v,h!==0&&(d=d.ushln(h),c.iushln(h),m=d.words[d.length-1]|0);var u=c.length-d.length,i;if(s!=="mod"){i=new f(null),i.length=u+1,i.words=new Array(i.length);for(var l=0;l<i.length;l++)i.words[l]=0}var F=c.clone()._ishlnsubmul(d,1,u);F.negative===0&&(c=F,i&&(i.words[u]=1));for(var O=u-1;O>=0;O--){var P=(c.words[d.length+O]|0)*67108864+(c.words[d.length+O-1]|0);for(P=Math.min(P/m|0,67108863),c._ishlnsubmul(d,P,O);c.negative!==0;)P--,c.negative=0,c._ishlnsubmul(d,1,O),c.isZero()||(c.negative^=1);i&&(i.words[O]=P)}return i&&i.strip(),c.strip(),s!=="div"&&h!==0&&c.iushrn(h),{div:i||null,mod:c}},f.prototype.divmod=function(n,s,h){if(a(!n.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var c,d,m;return this.negative!==0&&n.negative===0?(m=this.neg().divmod(n,s),s!=="mod"&&(c=m.div.neg()),s!=="div"&&(d=m.mod.neg(),h&&d.negative!==0&&d.iadd(n)),{div:c,mod:d}):this.negative===0&&n.negative!==0?(m=this.divmod(n.neg(),s),s!=="mod"&&(c=m.div.neg()),{div:c,mod:m.mod}):this.negative&n.negative?(m=this.neg().divmod(n.neg(),s),s!=="div"&&(d=m.mod.neg(),h&&d.negative!==0&&d.isub(n)),{div:m.div,mod:d}):n.length>this.length||this.cmp(n)<0?{div:new f(0),mod:this}:n.length===1?s==="div"?{div:this.divn(n.words[0]),mod:null}:s==="mod"?{div:null,mod:new f(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new f(this.modn(n.words[0]))}:this._wordDiv(n,s)},f.prototype.div=function(n){return this.divmod(n,"div",!1).div},f.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},f.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},f.prototype.divRound=function(n){var s=this.divmod(n);if(s.mod.isZero())return s.div;var h=s.div.negative!==0?s.mod.isub(n):s.mod,c=n.ushrn(1),d=n.andln(1),m=h.cmp(c);return m<0||d===1&&m===0?s.div:s.div.negative!==0?s.div.isubn(1):s.div.iaddn(1)},f.prototype.modn=function(n){a(n<=67108863);for(var s=(1<<26)%n,h=0,c=this.length-1;c>=0;c--)h=(s*h+(this.words[c]|0))%n;return h},f.prototype.idivn=function(n){a(n<=67108863);for(var s=0,h=this.length-1;h>=0;h--){var c=(this.words[h]|0)+s*67108864;this.words[h]=c/n|0,s=c%n}return this.strip()},f.prototype.divn=function(n){return this.clone().idivn(n)},f.prototype.egcd=function(n){a(n.negative===0),a(!n.isZero());var s=this,h=n.clone();s.negative!==0?s=s.umod(n):s=s.clone();for(var c=new f(1),d=new f(0),m=new f(0),v=new f(1),u=0;s.isEven()&&h.isEven();)s.iushrn(1),h.iushrn(1),++u;for(var i=h.clone(),l=s.clone();!s.isZero();){for(var F=0,O=1;!(s.words[0]&O)&&F<26;++F,O<<=1);if(F>0)for(s.iushrn(F);F-- >0;)(c.isOdd()||d.isOdd())&&(c.iadd(i),d.isub(l)),c.iushrn(1),d.iushrn(1);for(var P=0,L=1;!(h.words[0]&L)&&P<26;++P,L<<=1);if(P>0)for(h.iushrn(P);P-- >0;)(m.isOdd()||v.isOdd())&&(m.iadd(i),v.isub(l)),m.iushrn(1),v.iushrn(1);s.cmp(h)>=0?(s.isub(h),c.isub(m),d.isub(v)):(h.isub(s),m.isub(c),v.isub(d))}return{a:m,b:v,gcd:h.iushln(u)}},f.prototype._invmp=function(n){a(n.negative===0),a(!n.isZero());var s=this,h=n.clone();s.negative!==0?s=s.umod(n):s=s.clone();for(var c=new f(1),d=new f(0),m=h.clone();s.cmpn(1)>0&&h.cmpn(1)>0;){for(var v=0,u=1;!(s.words[0]&u)&&v<26;++v,u<<=1);if(v>0)for(s.iushrn(v);v-- >0;)c.isOdd()&&c.iadd(m),c.iushrn(1);for(var i=0,l=1;!(h.words[0]&l)&&i<26;++i,l<<=1);if(i>0)for(h.iushrn(i);i-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);s.cmp(h)>=0?(s.isub(h),c.isub(d)):(h.isub(s),d.isub(c))}var F;return s.cmpn(1)===0?F=c:F=d,F.cmpn(0)<0&&F.iadd(n),F},f.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var s=this.clone(),h=n.clone();s.negative=0,h.negative=0;for(var c=0;s.isEven()&&h.isEven();c++)s.iushrn(1),h.iushrn(1);do{for(;s.isEven();)s.iushrn(1);for(;h.isEven();)h.iushrn(1);var d=s.cmp(h);if(d<0){var m=s;s=h,h=m}else if(d===0||h.cmpn(1)===0)break;s.isub(h)}while(!0);return h.iushln(c)},f.prototype.invm=function(n){return this.egcd(n).a.umod(n)},f.prototype.isEven=function(){return(this.words[0]&1)===0},f.prototype.isOdd=function(){return(this.words[0]&1)===1},f.prototype.andln=function(n){return this.words[0]&n},f.prototype.bincn=function(n){a(typeof n=="number");var s=n%26,h=(n-s)/26,c=1<<s;if(this.length<=h)return this._expand(h+1),this.words[h]|=c,this;for(var d=c,m=h;d!==0&&m<this.length;m++){var v=this.words[m]|0;v+=d,d=v>>>26,v&=67108863,this.words[m]=v}return d!==0&&(this.words[m]=d,this.length++),this},f.prototype.isZero=function(){return this.length===1&&this.words[0]===0},f.prototype.cmpn=function(n){var s=n<0;if(this.negative!==0&&!s)return-1;if(this.negative===0&&s)return 1;this.strip();var h;if(this.length>1)h=1;else{s&&(n=-n),a(n<=67108863,"Number is too big");var c=this.words[0]|0;h=c===n?0:c<n?-1:1}return this.negative!==0?-h|0:h},f.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var s=this.ucmp(n);return this.negative!==0?-s|0:s},f.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var s=0,h=this.length-1;h>=0;h--){var c=this.words[h]|0,d=n.words[h]|0;if(c!==d){c<d?s=-1:c>d&&(s=1);break}}return s},f.prototype.gtn=function(n){return this.cmpn(n)===1},f.prototype.gt=function(n){return this.cmp(n)===1},f.prototype.gten=function(n){return this.cmpn(n)>=0},f.prototype.gte=function(n){return this.cmp(n)>=0},f.prototype.ltn=function(n){return this.cmpn(n)===-1},f.prototype.lt=function(n){return this.cmp(n)===-1},f.prototype.lten=function(n){return this.cmpn(n)<=0},f.prototype.lte=function(n){return this.cmp(n)<=0},f.prototype.eqn=function(n){return this.cmpn(n)===0},f.prototype.eq=function(n){return this.cmp(n)===0},f.red=function(n){return new G(n)},f.prototype.toRed=function(n){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},f.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(n){return this.red=n,this},f.prototype.forceRed=function(n){return a(!this.red,"Already a number in reduction context"),this._forceRed(n)},f.prototype.redAdd=function(n){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},f.prototype.redIAdd=function(n){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},f.prototype.redSub=function(n){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},f.prototype.redISub=function(n){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},f.prototype.redShl=function(n){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},f.prototype.redMul=function(n){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},f.prototype.redIMul=function(n){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},f.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(n){return a(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var N={k256:null,p224:null,p192:null,p25519:null};function A(p,n){this.name=p,this.p=new f(n,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var n=new f(null);return n.words=new Array(Math.ceil(this.n/13)),n},A.prototype.ireduce=function(n){var s=n,h;do this.split(s,this.tmp),s=this.imulK(s),s=s.iadd(this.tmp),h=s.bitLength();while(h>this.n);var c=h<this.n?-1:s.ucmp(this.p);return c===0?(s.words[0]=0,s.length=1):c>0?s.isub(this.p):s.strip(),s},A.prototype.split=function(n,s){n.iushrn(this.n,0,s)},A.prototype.imulK=function(n){return n.imul(this.k)};function W(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(W,A),W.prototype.split=function(n,s){for(var h=4194303,c=Math.min(n.length,9),d=0;d<c;d++)s.words[d]=n.words[d];if(s.length=c,n.length<=9){n.words[0]=0,n.length=1;return}var m=n.words[9];for(s.words[s.length++]=m&h,d=10;d<n.length;d++){var v=n.words[d]|0;n.words[d-10]=(v&h)<<4|m>>>22,m=v}m>>>=22,n.words[d-10]=m,m===0&&n.length>10?n.length-=10:n.length-=9},W.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var s=0,h=0;h<n.length;h++){var c=n.words[h]|0;s+=c*977,n.words[h]=s&67108863,s=c*64+(s/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function Ot(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(Ot,A);function U(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(U,A);function It(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(It,A),It.prototype.imulK=function(n){for(var s=0,h=0;h<n.length;h++){var c=(n.words[h]|0)*19+s,d=c&67108863;c>>>=26,n.words[h]=d,s=c}return s!==0&&(n.words[n.length++]=s),n},f._prime=function(n){if(N[n])return N[n];var s;if(n==="k256")s=new W;else if(n==="p224")s=new Ot;else if(n==="p192")s=new U;else if(n==="p25519")s=new It;else throw new Error("Unknown prime "+n);return N[n]=s,s};function G(p){if(typeof p=="string"){var n=f._prime(p);this.m=n.p,this.prime=n}else a(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}G.prototype._verify1=function(n){a(n.negative===0,"red works only with positives"),a(n.red,"red works only with red numbers")},G.prototype._verify2=function(n,s){a((n.negative|s.negative)===0,"red works only with positives"),a(n.red&&n.red===s.red,"red works only with red numbers")},G.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},G.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},G.prototype.add=function(n,s){this._verify2(n,s);var h=n.add(s);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},G.prototype.iadd=function(n,s){this._verify2(n,s);var h=n.iadd(s);return h.cmp(this.m)>=0&&h.isub(this.m),h},G.prototype.sub=function(n,s){this._verify2(n,s);var h=n.sub(s);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},G.prototype.isub=function(n,s){this._verify2(n,s);var h=n.isub(s);return h.cmpn(0)<0&&h.iadd(this.m),h},G.prototype.shl=function(n,s){return this._verify1(n),this.imod(n.ushln(s))},G.prototype.imul=function(n,s){return this._verify2(n,s),this.imod(n.imul(s))},G.prototype.mul=function(n,s){return this._verify2(n,s),this.imod(n.mul(s))},G.prototype.isqr=function(n){return this.imul(n,n.clone())},G.prototype.sqr=function(n){return this.mul(n,n)},G.prototype.sqrt=function(n){if(n.isZero())return n.clone();var s=this.m.andln(3);if(a(s%2===1),s===3){var h=this.m.add(new f(1)).iushrn(2);return this.pow(n,h)}for(var c=this.m.subn(1),d=0;!c.isZero()&&c.andln(1)===0;)d++,c.iushrn(1);a(!c.isZero());var m=new f(1).toRed(this),v=m.redNeg(),u=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new f(2*i*i).toRed(this);this.pow(i,u).cmp(v)!==0;)i.redIAdd(v);for(var l=this.pow(i,c),F=this.pow(n,c.addn(1).iushrn(1)),O=this.pow(n,c),P=d;O.cmp(m)!==0;){for(var L=O,o=0;L.cmp(m)!==0;o++)L=L.redSqr();a(o<P);var y=this.pow(l,new f(1).iushln(P-o-1));F=F.redMul(y),l=y.redSqr(),O=O.redMul(l),P=o}return F},G.prototype.invm=function(n){var s=n._invmp(this.m);return s.negative!==0?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},G.prototype.pow=function(n,s){if(s.isZero())return new f(1).toRed(this);if(s.cmpn(1)===0)return n.clone();var h=4,c=new Array(1<<h);c[0]=new f(1).toRed(this),c[1]=n;for(var d=2;d<c.length;d++)c[d]=this.mul(c[d-1],n);var m=c[0],v=0,u=0,i=s.bitLength()%26;for(i===0&&(i=26),d=s.length-1;d>=0;d--){for(var l=s.words[d],F=i-1;F>=0;F--){var O=l>>F&1;if(m!==c[0]&&(m=this.sqr(m)),O===0&&v===0){u=0;continue}v<<=1,v|=O,u++,!(u!==h&&(d!==0||F!==0))&&(m=this.mul(m,c[v]),u=0,v=0)}i=26}return m},G.prototype.convertTo=function(n){var s=n.umod(this.m);return s===n?s.clone():s},G.prototype.convertFrom=function(n){var s=n.clone();return s.red=null,s},f.mont=function(n){return new Tt(n)};function Tt(p){G.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(Tt,G),Tt.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Tt.prototype.convertFrom=function(n){var s=this.imod(n.mul(this.rinv));return s.red=null,s},Tt.prototype.imul=function(n,s){if(n.isZero()||s.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(s),c=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(c).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},Tt.prototype.mul=function(n,s){if(n.isZero()||s.isZero())return new f(0)._forceRed(this);var h=n.mul(s),c=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(c).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},Tt.prototype.invm=function(n){var s=this.imod(n._invmp(this.m).mul(this.r2));return s._forceRed(this)}})(e,Wr)})(Ve);var Rn=Ve.exports;const An=cr(Rn);var In=$e;$e.strict=yr;$e.loose=wr;var En=Object.prototype.toString,Bn={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function $e(e){return yr(e)||wr(e)}function yr(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function wr(e){return Bn[En.call(e)]}var Tn=In.strict,Cn=function(t){if(Tn(t)){var r=Buffer.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(r=r.slice(t.byteOffset,t.byteOffset+t.byteLength)),r}else return Buffer.from(t)};const Nn=cr(Cn),br="hex",Mr="utf8",we="0";function ue(e){return new Uint8Array(e)}function _r(e,t=!1){const r=e.toString(br);return t?de(r):r}function Fn(e){return e.toString(Mr)}function be(e){return Nn(e)}function fe(e,t=!1){return _r(be(e),t)}function Pn(e){return Fn(be(e))}function qn(e){return Buffer.from(zt(e),br)}function ce(e){return ue(qn(e))}function Ke(e){return Buffer.from(e,Mr)}function Ln(e){return ue(Ke(e))}function Wn(e,t=!1){return _r(Ke(e),t)}function jn(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/))}function Sr(...e){let t=[];return e.forEach(r=>t=t.concat(Array.from(r))),new Uint8Array([...t])}function Un(e,t=8){const r=e%t;return r?(e-r)/t*t+t:e}function Dn(e,t=8,r=we){return Hn(e,Un(e.length,t),r)}function Hn(e,t,r=we){return Vn(e,t,!0,r)}function zt(e){return e.replace(/^0x/,"")}function de(e){return e.startsWith("0x")?e:`0x${e}`}function xr(e){return e=zt(e),e=Dn(e,2),e&&(e=de(e)),e}function zn(e){const t=e.startsWith("0x");return e=zt(e),e=e.startsWith(we)?e.substring(1):e,t?de(e):e}function Vn(e,t,r,a=we){const g=t-e.length;let f=e;return g>0&&(f=a.repeat(g)+e),f}function Fe(e){return be(new Uint8Array(e))}function $n(e,t){return fe(new Uint8Array(e),!1)}function Kn(e){return ue(e).buffer}function Gn(e){return Ke(e)}function Jn(e,t){return Wn(e,!0)}function Zn(e){return ce(e).buffer}function kr(e,t){const r=zt(xr(new An(e).toString(16)));return t?r:de(r)}var Or={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",r="finalize already called",a=typeof window=="object",g=a?window:{};g.JS_SHA3_NO_WINDOW&&(a=!1);var f=!a&&typeof self=="object",x=!g.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;x?g=globalThis:f&&(g=self);var T=!g.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,E=!g.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",R="0123456789abcdef".split(""),H=[31,7936,2031616,520093696],z=[4,1024,262144,67108864],D=[1,256,65536,16777216],V=[6,1536,393216,100663296],$=[0,8,16,24],Et=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],w=[224,256,384,512],S=[128,256],N=["hex","buffer","arrayBuffer","array","digest"],A={128:168,256:136};(g.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"}),E&&(g.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(o){return typeof o=="object"&&o.buffer&&o.buffer.constructor===ArrayBuffer});for(var W=function(o,y,_){return function(b){return new O(o,y,o).update(b)[_]()}},Ot=function(o,y,_){return function(b,k){return new O(o,y,k).update(b)[_]()}},U=function(o,y,_){return function(b,k,q,B){return c["cshake"+o].update(b,k,q,B)[_]()}},It=function(o,y,_){return function(b,k,q,B){return c["kmac"+o].update(b,k,q,B)[_]()}},G=function(o,y,_,b){for(var k=0;k<N.length;++k){var q=N[k];o[q]=y(_,b,q)}return o},Tt=function(o,y){var _=W(o,y,"hex");return _.create=function(){return new O(o,y,o)},_.update=function(b){return _.create().update(b)},G(_,W,o,y)},p=function(o,y){var _=Ot(o,y,"hex");return _.create=function(b){return new O(o,y,b)},_.update=function(b,k){return _.create(k).update(b)},G(_,Ot,o,y)},n=function(o,y){var _=A[o],b=U(o,y,"hex");return b.create=function(k,q,B){return!q&&!B?c["shake"+o].create(k):new O(o,y,k).bytepad([q,B],_)},b.update=function(k,q,B,I){return b.create(q,B,I).update(k)},G(b,U,o,y)},s=function(o,y){var _=A[o],b=It(o,y,"hex");return b.create=function(k,q,B){return new P(o,y,q).bytepad(["KMAC",B],_).bytepad([k],_)},b.update=function(k,q,B,I){return b.create(k,B,I).update(q)},G(b,It,o,y)},h=[{name:"keccak",padding:D,bits:w,createMethod:Tt},{name:"sha3",padding:V,bits:w,createMethod:Tt},{name:"shake",padding:H,bits:S,createMethod:p},{name:"cshake",padding:z,bits:S,createMethod:n},{name:"kmac",padding:z,bits:S,createMethod:s}],c={},d=[],m=0;m<h.length;++m)for(var v=h[m],u=v.bits,i=0;i<u.length;++i){var l=v.name+"_"+u[i];if(d.push(l),c[l]=v.createMethod(u[i],v.padding),v.name!=="sha3"){var F=v.name+u[i];d.push(F),c[F]=c[l]}}function O(o,y,_){this.blocks=[],this.s=[],this.padding=y,this.outputBits=_,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(o<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=_>>5,this.extraBytes=(_&31)>>3;for(var b=0;b<50;++b)this.s[b]=0}O.prototype.update=function(o){if(this.finalized)throw new Error(r);var y,_=typeof o;if(_!=="string"){if(_==="object"){if(o===null)throw new Error(t);if(E&&o.constructor===ArrayBuffer)o=new Uint8Array(o);else if(!Array.isArray(o)&&(!E||!ArrayBuffer.isView(o)))throw new Error(t)}else throw new Error(t);y=!0}for(var b=this.blocks,k=this.byteCount,q=o.length,B=this.blockCount,I=0,Rt=this.s,C,j;I<q;){if(this.reset)for(this.reset=!1,b[0]=this.block,C=1;C<B+1;++C)b[C]=0;if(y)for(C=this.start;I<q&&C<k;++I)b[C>>2]|=o[I]<<$[C++&3];else for(C=this.start;I<q&&C<k;++I)j=o.charCodeAt(I),j<128?b[C>>2]|=j<<$[C++&3]:j<2048?(b[C>>2]|=(192|j>>6)<<$[C++&3],b[C>>2]|=(128|j&63)<<$[C++&3]):j<55296||j>=57344?(b[C>>2]|=(224|j>>12)<<$[C++&3],b[C>>2]|=(128|j>>6&63)<<$[C++&3],b[C>>2]|=(128|j&63)<<$[C++&3]):(j=65536+((j&1023)<<10|o.charCodeAt(++I)&1023),b[C>>2]|=(240|j>>18)<<$[C++&3],b[C>>2]|=(128|j>>12&63)<<$[C++&3],b[C>>2]|=(128|j>>6&63)<<$[C++&3],b[C>>2]|=(128|j&63)<<$[C++&3]);if(this.lastByteIndex=C,C>=k){for(this.start=C-k,this.block=b[B],C=0;C<B;++C)Rt[C]^=b[C];L(Rt),this.reset=!0}else this.start=C}return this},O.prototype.encode=function(o,y){var _=o&255,b=1,k=[_];for(o=o>>8,_=o&255;_>0;)k.unshift(_),o=o>>8,_=o&255,++b;return y?k.push(b):k.unshift(b),this.update(k),k.length},O.prototype.encodeString=function(o){var y,_=typeof o;if(_!=="string"){if(_==="object"){if(o===null)throw new Error(t);if(E&&o.constructor===ArrayBuffer)o=new Uint8Array(o);else if(!Array.isArray(o)&&(!E||!ArrayBuffer.isView(o)))throw new Error(t)}else throw new Error(t);y=!0}var b=0,k=o.length;if(y)b=k;else for(var q=0;q<o.length;++q){var B=o.charCodeAt(q);B<128?b+=1:B<2048?b+=2:B<55296||B>=57344?b+=3:(B=65536+((B&1023)<<10|o.charCodeAt(++q)&1023),b+=4)}return b+=this.encode(b*8),this.update(o),b},O.prototype.bytepad=function(o,y){for(var _=this.encode(y),b=0;b<o.length;++b)_+=this.encodeString(o[b]);var k=y-_%y,q=[];return q.length=k,this.update(q),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var o=this.blocks,y=this.lastByteIndex,_=this.blockCount,b=this.s;if(o[y>>2]|=this.padding[y&3],this.lastByteIndex===this.byteCount)for(o[0]=o[_],y=1;y<_+1;++y)o[y]=0;for(o[_-1]|=2147483648,y=0;y<_;++y)b[y]^=o[y];L(b)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var o=this.blockCount,y=this.s,_=this.outputBlocks,b=this.extraBytes,k=0,q=0,B="",I;q<_;){for(k=0;k<o&&q<_;++k,++q)I=y[k],B+=R[I>>4&15]+R[I&15]+R[I>>12&15]+R[I>>8&15]+R[I>>20&15]+R[I>>16&15]+R[I>>28&15]+R[I>>24&15];q%o===0&&(L(y),k=0)}return b&&(I=y[k],B+=R[I>>4&15]+R[I&15],b>1&&(B+=R[I>>12&15]+R[I>>8&15]),b>2&&(B+=R[I>>20&15]+R[I>>16&15])),B},O.prototype.arrayBuffer=function(){this.finalize();var o=this.blockCount,y=this.s,_=this.outputBlocks,b=this.extraBytes,k=0,q=0,B=this.outputBits>>3,I;b?I=new ArrayBuffer(_+1<<2):I=new ArrayBuffer(B);for(var Rt=new Uint32Array(I);q<_;){for(k=0;k<o&&q<_;++k,++q)Rt[q]=y[k];q%o===0&&L(y)}return b&&(Rt[k]=y[k],I=I.slice(0,B)),I},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.digest=O.prototype.array=function(){this.finalize();for(var o=this.blockCount,y=this.s,_=this.outputBlocks,b=this.extraBytes,k=0,q=0,B=[],I,Rt;q<_;){for(k=0;k<o&&q<_;++k,++q)I=q<<2,Rt=y[k],B[I]=Rt&255,B[I+1]=Rt>>8&255,B[I+2]=Rt>>16&255,B[I+3]=Rt>>24&255;q%o===0&&L(y)}return b&&(I=q<<2,Rt=y[k],B[I]=Rt&255,b>1&&(B[I+1]=Rt>>8&255),b>2&&(B[I+2]=Rt>>16&255)),B};function P(o,y,_){O.call(this,o,y,_)}P.prototype=new O,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var L=function(o){var y,_,b,k,q,B,I,Rt,C,j,$t,Z,Q,Kt,X,Y,Gt,tt,et,Jt,rt,nt,Zt,it,st,Qt,ot,at,Xt,ht,ft,Yt,ct,ut,te,lt,dt,ee,pt,gt,re,mt,vt,ne,yt,wt,ie,bt,Mt,se,_t,St,oe,xt,kt,Ft,Pt,qt,Lt,Wt,jt,Ut,Dt;for(b=0;b<48;b+=2)k=o[0]^o[10]^o[20]^o[30]^o[40],q=o[1]^o[11]^o[21]^o[31]^o[41],B=o[2]^o[12]^o[22]^o[32]^o[42],I=o[3]^o[13]^o[23]^o[33]^o[43],Rt=o[4]^o[14]^o[24]^o[34]^o[44],C=o[5]^o[15]^o[25]^o[35]^o[45],j=o[6]^o[16]^o[26]^o[36]^o[46],$t=o[7]^o[17]^o[27]^o[37]^o[47],Z=o[8]^o[18]^o[28]^o[38]^o[48],Q=o[9]^o[19]^o[29]^o[39]^o[49],y=Z^(B<<1|I>>>31),_=Q^(I<<1|B>>>31),o[0]^=y,o[1]^=_,o[10]^=y,o[11]^=_,o[20]^=y,o[21]^=_,o[30]^=y,o[31]^=_,o[40]^=y,o[41]^=_,y=k^(Rt<<1|C>>>31),_=q^(C<<1|Rt>>>31),o[2]^=y,o[3]^=_,o[12]^=y,o[13]^=_,o[22]^=y,o[23]^=_,o[32]^=y,o[33]^=_,o[42]^=y,o[43]^=_,y=B^(j<<1|$t>>>31),_=I^($t<<1|j>>>31),o[4]^=y,o[5]^=_,o[14]^=y,o[15]^=_,o[24]^=y,o[25]^=_,o[34]^=y,o[35]^=_,o[44]^=y,o[45]^=_,y=Rt^(Z<<1|Q>>>31),_=C^(Q<<1|Z>>>31),o[6]^=y,o[7]^=_,o[16]^=y,o[17]^=_,o[26]^=y,o[27]^=_,o[36]^=y,o[37]^=_,o[46]^=y,o[47]^=_,y=j^(k<<1|q>>>31),_=$t^(q<<1|k>>>31),o[8]^=y,o[9]^=_,o[18]^=y,o[19]^=_,o[28]^=y,o[29]^=_,o[38]^=y,o[39]^=_,o[48]^=y,o[49]^=_,Kt=o[0],X=o[1],wt=o[11]<<4|o[10]>>>28,ie=o[10]<<4|o[11]>>>28,at=o[20]<<3|o[21]>>>29,Xt=o[21]<<3|o[20]>>>29,Wt=o[31]<<9|o[30]>>>23,jt=o[30]<<9|o[31]>>>23,mt=o[40]<<18|o[41]>>>14,vt=o[41]<<18|o[40]>>>14,ut=o[2]<<1|o[3]>>>31,te=o[3]<<1|o[2]>>>31,Y=o[13]<<12|o[12]>>>20,Gt=o[12]<<12|o[13]>>>20,bt=o[22]<<10|o[23]>>>22,Mt=o[23]<<10|o[22]>>>22,ht=o[33]<<13|o[32]>>>19,ft=o[32]<<13|o[33]>>>19,Ut=o[42]<<2|o[43]>>>30,Dt=o[43]<<2|o[42]>>>30,xt=o[5]<<30|o[4]>>>2,kt=o[4]<<30|o[5]>>>2,lt=o[14]<<6|o[15]>>>26,dt=o[15]<<6|o[14]>>>26,tt=o[25]<<11|o[24]>>>21,et=o[24]<<11|o[25]>>>21,se=o[34]<<15|o[35]>>>17,_t=o[35]<<15|o[34]>>>17,Yt=o[45]<<29|o[44]>>>3,ct=o[44]<<29|o[45]>>>3,it=o[6]<<28|o[7]>>>4,st=o[7]<<28|o[6]>>>4,Ft=o[17]<<23|o[16]>>>9,Pt=o[16]<<23|o[17]>>>9,ee=o[26]<<25|o[27]>>>7,pt=o[27]<<25|o[26]>>>7,Jt=o[36]<<21|o[37]>>>11,rt=o[37]<<21|o[36]>>>11,St=o[47]<<24|o[46]>>>8,oe=o[46]<<24|o[47]>>>8,ne=o[8]<<27|o[9]>>>5,yt=o[9]<<27|o[8]>>>5,Qt=o[18]<<20|o[19]>>>12,ot=o[19]<<20|o[18]>>>12,qt=o[29]<<7|o[28]>>>25,Lt=o[28]<<7|o[29]>>>25,gt=o[38]<<8|o[39]>>>24,re=o[39]<<8|o[38]>>>24,nt=o[48]<<14|o[49]>>>18,Zt=o[49]<<14|o[48]>>>18,o[0]=Kt^~Y&tt,o[1]=X^~Gt&et,o[10]=it^~Qt&at,o[11]=st^~ot&Xt,o[20]=ut^~lt&ee,o[21]=te^~dt&pt,o[30]=ne^~wt&bt,o[31]=yt^~ie&Mt,o[40]=xt^~Ft&qt,o[41]=kt^~Pt&Lt,o[2]=Y^~tt&Jt,o[3]=Gt^~et&rt,o[12]=Qt^~at&ht,o[13]=ot^~Xt&ft,o[22]=lt^~ee&gt,o[23]=dt^~pt&re,o[32]=wt^~bt&se,o[33]=ie^~Mt&_t,o[42]=Ft^~qt&Wt,o[43]=Pt^~Lt&jt,o[4]=tt^~Jt&nt,o[5]=et^~rt&Zt,o[14]=at^~ht&Yt,o[15]=Xt^~ft&ct,o[24]=ee^~gt&mt,o[25]=pt^~re&vt,o[34]=bt^~se&St,o[35]=Mt^~_t&oe,o[44]=qt^~Wt&Ut,o[45]=Lt^~jt&Dt,o[6]=Jt^~nt&Kt,o[7]=rt^~Zt&X,o[16]=ht^~Yt&it,o[17]=ft^~ct&st,o[26]=gt^~mt&ut,o[27]=re^~vt&te,o[36]=se^~St&ne,o[37]=_t^~oe&yt,o[46]=Wt^~Ut&xt,o[47]=jt^~Dt&kt,o[8]=nt^~Kt&Y,o[9]=Zt^~X&Gt,o[18]=Yt^~it&Qt,o[19]=ct^~st&ot,o[28]=mt^~ut&lt,o[29]=vt^~te&dt,o[38]=St^~ne&wt,o[39]=oe^~yt&ie,o[48]=Ut^~xt&Ft,o[49]=Dt^~kt&Pt,o[0]^=Et[b],o[1]^=Et[b+1]};if(T)e.exports=c;else for(m=0;m<d.length;++m)g[d[m]]=c[d[m]]})()})(Or);var Qn=Or.exports,pe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pe=function(e,t){return Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var g in a)a.hasOwnProperty(g)&&(r[g]=a[g])},Pe(e,t)};function Xn(e,t){Pe(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var qe=function(){return qe=Object.assign||function(t){for(var r,a=1,g=arguments.length;a<g;a++){r=arguments[a];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},qe.apply(this,arguments)};function Yn(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,a=Object.getOwnPropertySymbols(e);g<a.length;g++)t.indexOf(a[g])<0&&Object.prototype.propertyIsEnumerable.call(e,a[g])&&(r[a[g]]=e[a[g]]);return r}function ti(e,t,r,a){var g=arguments.length,f=g<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,r):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(e,t,r,a);else for(var T=e.length-1;T>=0;T--)(x=e[T])&&(f=(g<3?x(f):g>3?x(t,r,f):x(t,r))||f);return g>3&&f&&Object.defineProperty(t,r,f),f}function ei(e,t){return function(r,a){t(r,a,e)}}function ri(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ni(e,t,r,a){function g(f){return f instanceof r?f:new r(function(x){x(f)})}return new(r||(r=Promise))(function(f,x){function T(H){try{R(a.next(H))}catch(z){x(z)}}function E(H){try{R(a.throw(H))}catch(z){x(z)}}function R(H){H.done?f(H.value):g(H.value).then(T,E)}R((a=a.apply(e,t||[])).next())})}function ii(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,g,f,x;return x={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function T(R){return function(H){return E([R,H])}}function E(R){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,g&&(f=R[0]&2?g.return:R[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,R[1])).done)return f;switch(g=0,f&&(R=[R[0]&2,f.value]),R[0]){case 0:case 1:f=R;break;case 4:return r.label++,{value:R[1],done:!1};case 5:r.label++,g=R[1],R=[0];continue;case 7:R=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(R[0]===6||R[0]===2)){r=0;continue}if(R[0]===3&&(!f||R[1]>f[0]&&R[1]<f[3])){r.label=R[1];break}if(R[0]===6&&r.label<f[1]){r.label=f[1],f=R;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(R);break}f[2]&&r.ops.pop(),r.trys.pop();continue}R=t.call(e,r)}catch(H){R=[6,H],g=0}finally{a=f=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}}function si(e,t,r,a){a===void 0&&(a=r),e[a]=t[r]}function oi(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Le(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),g,f=[],x;try{for(;(t===void 0||t-- >0)&&!(g=a.next()).done;)f.push(g.value)}catch(T){x={error:T}}finally{try{g&&!g.done&&(r=a.return)&&r.call(a)}finally{if(x)throw x.error}}return f}function ai(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Rr(arguments[t]));return e}function hi(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),g=0,t=0;t<r;t++)for(var f=arguments[t],x=0,T=f.length;x<T;x++,g++)a[g]=f[x];return a}function me(e){return this instanceof me?(this.v=e,this):new me(e)}function fi(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(e,t||[]),g,f=[];return g={},x("next"),x("throw"),x("return"),g[Symbol.asyncIterator]=function(){return this},g;function x(D){a[D]&&(g[D]=function(V){return new Promise(function($,Et){f.push([D,V,$,Et])>1||T(D,V)})})}function T(D,V){try{E(a[D](V))}catch($){z(f[0][3],$)}}function E(D){D.value instanceof me?Promise.resolve(D.value.v).then(R,H):z(f[0][2],D)}function R(D){T("next",D)}function H(D){T("throw",D)}function z(D,V){D(V),f.shift(),f.length&&T(f[0][0],f[0][1])}}function ci(e){var t,r;return t={},a("next"),a("throw",function(g){throw g}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(g,f){t[g]=e[g]?function(x){return(r=!r)?{value:me(e[g](x)),done:g==="return"}:f?f(x):x}:f}}function ui(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Le=="function"?Le(e):e[Symbol.iterator](),r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r);function a(f){r[f]=e[f]&&function(x){return new Promise(function(T,E){x=e[f](x),g(T,E,x.done,x.value)})}}function g(f,x,T,E){Promise.resolve(E).then(function(R){f({value:R,done:T})},x)}}function li(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function di(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function pi(e){return e&&e.__esModule?e:{default:e}}function gi(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function mi(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const vi=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return qe},__asyncDelegator:ci,__asyncGenerator:fi,__asyncValues:ui,__await:me,__awaiter:ni,__classPrivateFieldGet:gi,__classPrivateFieldSet:mi,__createBinding:si,__decorate:ti,__exportStar:oi,__extends:Xn,__generator:ii,__importDefault:pi,__importStar:di,__makeTemplateObject:li,__metadata:ri,__param:ei,__read:Rr,__rest:Yn,__spread:ai,__spreadArrays:hi,__values:Le},Symbol.toStringTag,{value:"Module"})),yi=jr(vi);var Ct={},er;function wi(){if(er)return Ct;er=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.isBrowserCryptoAvailable=Ct.getSubtleCrypto=Ct.getBrowerCrypto=void 0;function e(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}Ct.getBrowerCrypto=e;function t(){const a=e();return a.subtle||a.webkitSubtle}Ct.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return Ct.isBrowserCryptoAvailable=r,Ct}var Nt={},rr;function bi(){if(rr)return Nt;rr=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.isBrowser=Nt.isNode=Nt.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Nt.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Nt.isNode=t;function r(){return!e()&&!t()}return Nt.isBrowser=r,Nt}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=yi;t.__exportStar(wi(),e),t.__exportStar(bi(),e)})(pe);function Mi(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function ve(e){return xr(e)}function _i(e){return zn(de(e))}const Si=Mi;function Te(){return((t,r)=>{for(r=t="";t++<36;r+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-");return r})()}function xi(e){return e===""||typeof e=="string"&&e.trim()===""}function ki(e){return!(e&&e.length)}function Ar(e,t){return jn(e)}function Oi(e){return typeof e.method<"u"}function ge(e){return typeof e.result<"u"}function ye(e){return typeof e.error<"u"}function nr(e){return typeof e.event<"u"}function Ri(e){return On.includes(e)||e.startsWith("wc_")}function Ai(e){return e.method.startsWith("wc_")?!0:!vr.includes(e.method)}function Ii(e){e=zt(e.toLowerCase());const t=zt(Qn.keccak_256(Gn(e)));let r="";for(let a=0;a<e.length;a++)parseInt(t[a],16)>7?r+=e[a].toUpperCase():r+=e[a];return de(r)}const Ei=e=>e?e.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(e)?/^(0x)?[0-9a-f]{40}$/.test(e)||/^(0x)?[0-9A-F]{40}$/.test(e)?!0:e===Ii(e):!1:!1;function ir(e){return!ki(e)&&!Ar(e[0])&&(e[0]=Jn(e[0])),e}function Ce(e){if(typeof e.type<"u"&&e.type!=="0")return e;if(typeof e.from>"u"||!Ei(e.from))throw new Error("Transaction object must include a valid 'from' value.");function t(g){let f=g;return(typeof g=="number"||typeof g=="string"&&!xi(g))&&(Ar(g)?typeof g=="string"&&(f=ve(g)):f=kr(g)),typeof f=="string"&&(f=_i(f)),f}const r={from:ve(e.from),to:typeof e.to>"u"?void 0:ve(e.to),gasPrice:typeof e.gasPrice>"u"?"":t(e.gasPrice),gas:typeof e.gas>"u"?typeof e.gasLimit>"u"?"":t(e.gasLimit):t(e.gas),value:typeof e.value>"u"?"":t(e.value),nonce:typeof e.nonce>"u"?"":t(e.nonce),data:typeof e.data>"u"?"":ve(e.data)||"0x"},a=["gasPrice","gas","value","nonce"];return Object.keys(r).forEach(g=>{(typeof r[g]>"u"||typeof r[g]=="string"&&!r[g].trim().length)&&a.includes(g)&&delete r[g]}),r}function Bi(e){const t=e.message||"Failed or Rejected Request";let r=-32e3;if(e&&!e.code)switch(t){case"Parse error":r=-32700;break;case"Invalid request":r=-32600;break;case"Method not found":r=-32601;break;case"Invalid params":r=-32602;break;case"Internal error":r=-32603;break;default:r=-32e3;break}const a={code:r,message:t};return e.data&&(a.data=e.data),a}var Ge={},Ti=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Ir="%[a-f0-9]{2}",sr=new RegExp("("+Ir+")|([^%]+?)","gi"),or=new RegExp("("+Ir+")+","gi");function We(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),a=e.slice(t);return Array.prototype.concat.call([],We(r),We(a))}function Ci(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(sr)||[],r=1;r<t.length;r++)e=We(t,r).join(""),t=e.match(sr)||[];return e}}function Ni(e){for(var t={"%FE%FF":"","%FF%FE":""},r=or.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var a=Ci(r[0]);a!==r[0]&&(t[r[0]]=a)}r=or.exec(e)}t["%C2"]="";for(var g=Object.keys(t),f=0;f<g.length;f++){var x=g[f];e=e.replace(new RegExp(x,"g"),t[x])}return e}var Fi=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Ni(e)}},Pi=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]};(function(e){const t=Ti,r=Fi,a=Pi,g=w=>w==null;function f(w){switch(w.arrayFormat){case"index":return S=>(N,A)=>{const W=N.length;return A===void 0||w.skipNull&&A===null||w.skipEmptyString&&A===""?N:A===null?[...N,[E(S,w),"[",W,"]"].join("")]:[...N,[E(S,w),"[",E(W,w),"]=",E(A,w)].join("")]};case"bracket":return S=>(N,A)=>A===void 0||w.skipNull&&A===null||w.skipEmptyString&&A===""?N:A===null?[...N,[E(S,w),"[]"].join("")]:[...N,[E(S,w),"[]=",E(A,w)].join("")];case"comma":case"separator":return S=>(N,A)=>A==null||A.length===0?N:N.length===0?[[E(S,w),"=",E(A,w)].join("")]:[[N,E(A,w)].join(w.arrayFormatSeparator)];default:return S=>(N,A)=>A===void 0||w.skipNull&&A===null||w.skipEmptyString&&A===""?N:A===null?[...N,E(S,w)]:[...N,[E(S,w),"=",E(A,w)].join("")]}}function x(w){let S;switch(w.arrayFormat){case"index":return(N,A,W)=>{if(S=/\[(\d*)\]$/.exec(N),N=N.replace(/\[\d*\]$/,""),!S){W[N]=A;return}W[N]===void 0&&(W[N]={}),W[N][S[1]]=A};case"bracket":return(N,A,W)=>{if(S=/(\[\])$/.exec(N),N=N.replace(/\[\]$/,""),!S){W[N]=A;return}if(W[N]===void 0){W[N]=[A];return}W[N]=[].concat(W[N],A)};case"comma":case"separator":return(N,A,W)=>{const U=typeof A=="string"&&A.split("").indexOf(w.arrayFormatSeparator)>-1?A.split(w.arrayFormatSeparator).map(It=>R(It,w)):A===null?A:R(A,w);W[N]=U};default:return(N,A,W)=>{if(W[N]===void 0){W[N]=A;return}W[N]=[].concat(W[N],A)}}}function T(w){if(typeof w!="string"||w.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function E(w,S){return S.encode?S.strict?t(w):encodeURIComponent(w):w}function R(w,S){return S.decode?r(w):w}function H(w){return Array.isArray(w)?w.sort():typeof w=="object"?H(Object.keys(w)).sort((S,N)=>Number(S)-Number(N)).map(S=>w[S]):w}function z(w){const S=w.indexOf("#");return S!==-1&&(w=w.slice(0,S)),w}function D(w){let S="";const N=w.indexOf("#");return N!==-1&&(S=w.slice(N)),S}function V(w){w=z(w);const S=w.indexOf("?");return S===-1?"":w.slice(S+1)}function $(w,S){return S.parseNumbers&&!Number.isNaN(Number(w))&&typeof w=="string"&&w.trim()!==""?w=Number(w):S.parseBooleans&&w!==null&&(w.toLowerCase()==="true"||w.toLowerCase()==="false")&&(w=w.toLowerCase()==="true"),w}function Et(w,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),T(S.arrayFormatSeparator);const N=x(S),A=Object.create(null);if(typeof w!="string"||(w=w.trim().replace(/^[?#&]/,""),!w))return A;for(const W of w.split("&")){let[Ot,U]=a(S.decode?W.replace(/\+/g," "):W,"=");U=U===void 0?null:["comma","separator"].includes(S.arrayFormat)?U:R(U,S),N(R(Ot,S),U,A)}for(const W of Object.keys(A)){const Ot=A[W];if(typeof Ot=="object"&&Ot!==null)for(const U of Object.keys(Ot))Ot[U]=$(Ot[U],S);else A[W]=$(Ot,S)}return S.sort===!1?A:(S.sort===!0?Object.keys(A).sort():Object.keys(A).sort(S.sort)).reduce((W,Ot)=>{const U=A[Ot];return U&&typeof U=="object"&&!Array.isArray(U)?W[Ot]=H(U):W[Ot]=U,W},Object.create(null))}e.extract=V,e.parse=Et,e.stringify=(w,S)=>{if(!w)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),T(S.arrayFormatSeparator);const N=U=>S.skipNull&&g(w[U])||S.skipEmptyString&&w[U]==="",A=f(S),W={};for(const U of Object.keys(w))N(U)||(W[U]=w[U]);const Ot=Object.keys(W);return S.sort!==!1&&Ot.sort(S.sort),Ot.map(U=>{const It=w[U];return It===void 0?"":It===null?E(U,S):Array.isArray(It)?It.reduce(A(U),[]).join("&"):E(U,S)+"="+E(It,S)}).filter(U=>U.length>0).join("&")},e.parseUrl=(w,S)=>{S=Object.assign({decode:!0},S);const[N,A]=a(w,"#");return Object.assign({url:N.split("?")[0]||"",query:Et(V(w),S)},S&&S.parseFragmentIdentifier&&A?{fragmentIdentifier:R(A,S)}:{})},e.stringifyUrl=(w,S)=>{S=Object.assign({encode:!0,strict:!0},S);const N=z(w.url).split("?")[0]||"",A=e.extract(w.url),W=e.parse(A,{sort:!1}),Ot=Object.assign(W,w.query);let U=e.stringify(Ot,S);U&&(U=`?${U}`);let It=D(w.url);return w.fragmentIdentifier&&(It=`#${E(w.fragmentIdentifier,S)}`),`${N}${U}${It}`}})(Ge);function qi(e){const t=e.indexOf("?")!==-1?e.indexOf("?"):void 0;return typeof t<"u"?e.substr(t):""}function Li(e,t){let r=Er(e);return r=Object.assign(Object.assign({},r),t),e=Wi(r),e}function Er(e){return Ge.parse(e)}function Wi(e){return Ge.stringify(e)}function ji(e){return typeof e.bridge<"u"}function Ui(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,a=e.substring(0,t),g=e.substring(t+1,r);function f(z){const V=z.split("@");return{handshakeTopic:V[0],version:parseInt(V[1],10)}}const x=f(g),T=typeof r<"u"?e.substr(r):"";function E(z){const D=Er(z);return{key:D.key||"",bridge:D.bridge||""}}const R=E(T);return Object.assign(Object.assign({protocol:a},x),R)}class Di{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(t,r){this._eventEmitters.push({event:t,callback:r})}trigger(t){let r=[];t&&(r=this._eventEmitters.filter(a=>a.event===t)),r.forEach(a=>{a.callback()})}}const Hi=typeof globalThis.WebSocket<"u"?globalThis.WebSocket:require("ws");class zi{constructor(t){if(this.opts=t,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=t.protocol,this._version=t.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=t.subscriptions||[],this._netMonitor=t.netMonitor||new Di,!t.url||typeof t.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=t.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(t){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(t){}get connecting(){return this.readyState===0}set connected(t){}get connected(){return this.readyState===1}set closing(t){}get closing(){return this.readyState===2}set closed(t){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(t,r,a){if(!r||typeof r!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:r,type:"pub",payload:t,silent:!!a})}subscribe(t){this._socketSend({topic:t,type:"sub",payload:"",silent:!0})}on(t,r){this._events.push({event:t,callback:r})}_socketCreate(){if(this._nextSocket)return;const t=Vi(this._url,this._protocol,this._version);if(this._nextSocket=new Hi(t),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=r=>this._socketReceive(r),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=r=>this._socketError(r),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(t){const r=JSON.stringify(t);this._socket&&this._socket.readyState===1?this._socket.send(r):(this._setToQueue(t),this._socketCreate())}async _socketReceive(t){let r;try{r=JSON.parse(t.data)}catch{return}if(this._socketSend({topic:r.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const a=this._events.filter(g=>g.event==="message");a&&a.length&&a.forEach(g=>g.callback(r))}}_socketError(t){const r=this._events.filter(a=>a.event==="error");r&&r.length&&r.forEach(a=>a.callback(t))}_queueSubscriptions(){this._subscriptions.forEach(r=>this._queue.push({topic:r,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(t){this._queue.push(t)}_pushQueue(){this._queue.forEach(r=>this._socketSend(r)),this._queue=[]}}function Vi(e,t,r){var a,g;const x=(e.startsWith("https")?e.replace("https","wss"):e.startsWith("http")?e.replace("http","ws"):e).split("?"),T=yn()?{protocol:t,version:r,env:"browser",host:((a=bn())===null||a===void 0?void 0:a.host)||""}:{protocol:t,version:r,env:((g=De())===null||g===void 0?void 0:g.name)||""},E=Li(qi(x[1]||""),T);return x[0]+"?"+E}const Ne="Session currently connected",ae="Session currently disconnected",$i="Session Rejected",Ki="Missing JSON RPC response",Gi='JSON-RPC success response must include "result" field',Ji='JSON-RPC error response must include "error" field',Zi='JSON RPC request must have valid "method" value',Qi='JSON RPC request must have valid "id" value',Xi="Missing one of the required parameters: bridge / uri / session",ar="JSON RPC response format is invalid",Yi="URI format is invalid",ts="QRCode Modal not provided",hr="User close QRCode Modal";class es{constructor(){this._eventEmitters=[]}subscribe(t){this._eventEmitters.push(t)}unsubscribe(t){this._eventEmitters=this._eventEmitters.filter(r=>r.event!==t)}trigger(t){let r=[],a;Oi(t)?a=t.method:ge(t)||ye(t)?a=`response:${t.id}`:nr(t)?a=t.event:a="",a&&(r=this._eventEmitters.filter(g=>g.event===a)),(!r||!r.length)&&!Ri(a)&&!nr(a)&&(r=this._eventEmitters.filter(g=>g.event==="call_request")),r.forEach(g=>{if(ye(t)){const f=new Error(t.error.message);g.callback(f,null)}else g.callback(null,t)})}}class rs{constructor(t="walletconnect"){this.storageId=t}getSession(){let t=null;const r=gr(this.storageId);return r&&ji(r)&&(t=r),t}setSession(t){return kn(this.storageId,t),t}removeSession(){mr(this.storageId)}}const ns="walletconnect.org",is="abcdefghijklmnopqrstuvwxyz0123456789",Br=is.split("").map(e=>`https://${e}.bridge.walletconnect.org`);function ss(e){let t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0];return t=t.split(":")[0],t=t.split("?")[0],t}function os(e){return ss(e).split(".").slice(-2).join(".")}function as(){return Math.floor(Math.random()*Br.length)}function hs(){return Br[as()]}function fs(e){return os(e)===ns}function cs(e){return fs(e)?hs():e}class us{constructor(t){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new es,this._clientMeta=Ye()||t.connectorOpts.clientMeta||null,this._cryptoLib=t.cryptoLib,this._sessionStorage=t.sessionStorage||new rs(t.connectorOpts.storageId),this._qrcodeModal=t.connectorOpts.qrcodeModal,this._qrcodeModalOptions=t.connectorOpts.qrcodeModalOptions,this._signingMethods=[...vr,...t.connectorOpts.signingMethods||[]],!t.connectorOpts.bridge&&!t.connectorOpts.uri&&!t.connectorOpts.session)throw new Error(Xi);t.connectorOpts.bridge&&(this.bridge=cs(t.connectorOpts.bridge)),t.connectorOpts.uri&&(this.uri=t.connectorOpts.uri);const r=t.connectorOpts.session||this._getStorageSession();r&&(this.session=r),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=t.transport||new zi({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),t.connectorOpts.uri&&this._subscribeToSessionRequest(),t.pushServerOpts&&this._registerPushServer(t.pushServerOpts)}set bridge(t){t&&(this._bridge=t)}get bridge(){return this._bridge}set key(t){if(!t)return;const r=Zn(t);this._key=r}get key(){return this._key?$n(this._key):""}set clientId(t){t&&(this._clientId=t)}get clientId(){let t=this._clientId;return t||(t=this._clientId=Te()),this._clientId}set peerId(t){t&&(this._peerId=t)}get peerId(){return this._peerId}set clientMeta(t){}get clientMeta(){let t=this._clientMeta;return t||(t=this._clientMeta=Ye()),t}set peerMeta(t){this._peerMeta=t}get peerMeta(){return this._peerMeta}set handshakeTopic(t){t&&(this._handshakeTopic=t)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(t){t&&(this._handshakeId=t)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(t){if(!t)return;const{handshakeTopic:r,bridge:a,key:g}=this._parseUri(t);this.handshakeTopic=r,this.bridge=a,this.key=g}set chainId(t){this._chainId=t}get chainId(){return this._chainId}set networkId(t){this._networkId=t}get networkId(){return this._networkId}set accounts(t){this._accounts=t}get accounts(){return this._accounts}set rpcUrl(t){this._rpcUrl=t}get rpcUrl(){return this._rpcUrl}set connected(t){}get connected(){return this._connected}set pending(t){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(t){t&&(this._connected=t.connected,this.accounts=t.accounts,this.chainId=t.chainId,this.bridge=t.bridge,this.key=t.key,this.clientId=t.clientId,this.clientMeta=t.clientMeta,this.peerId=t.peerId,this.peerMeta=t.peerMeta,this.handshakeId=t.handshakeId,this.handshakeTopic=t.handshakeTopic)}on(t,r){const a={event:t,callback:r};this._eventManager.subscribe(a)}off(t){this._eventManager.unsubscribe(t)}async createInstantRequest(t){this._key=await this._generateKey();const r=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(t)}]});this.handshakeId=r.id,this.handshakeTopic=Te(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(hr)});const a=()=>{this.killSession()};try{const g=await this._sendCallRequest(r);return g&&a(),g}catch(g){throw a(),g}}async connect(t){if(!this._qrcodeModal)throw new Error(ts);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(t),new Promise(async(r,a)=>{this.on("modal_closed",()=>a(new Error(hr))),this.on("connect",(g,f)=>{if(g)return a(g);r(f.params[0])})}))}async createSession(t){if(this._connected)throw new Error(Ne);if(this.pending)return;this._key=await this._generateKey();const r=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:t&&t.chainId?t.chainId:null}]});this.handshakeId=r.id,this.handshakeTopic=Te(),this._sendSessionRequest(r,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(t){if(this._connected)throw new Error(Ne);this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},a={id:this.handshakeId,jsonrpc:"2.0",result:r};this._sendResponse(a),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(t){if(this._connected)throw new Error(Ne);const r=t&&t.message?t.message:$i,a=this._formatResponse({id:this.handshakeId,error:{message:r}});this._sendResponse(a),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession()}updateSession(t){if(!this._connected)throw new Error(ae);this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},a=this._formatRequest({method:"wc_sessionUpdate",params:[r]});this._sendSessionRequest(a,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(t){const r=t?t.message:"Session Disconnected",a={approved:!1,chainId:null,networkId:null,accounts:null},g=this._formatRequest({method:"wc_sessionUpdate",params:[a]});await this._sendRequest(g),this._handleSessionDisconnect(r)}async sendTransaction(t){if(!this._connected)throw new Error(ae);const r=Ce(t),a=this._formatRequest({method:"eth_sendTransaction",params:[r]});return await this._sendCallRequest(a)}async signTransaction(t){if(!this._connected)throw new Error(ae);const r=Ce(t),a=this._formatRequest({method:"eth_signTransaction",params:[r]});return await this._sendCallRequest(a)}async signMessage(t){if(!this._connected)throw new Error(ae);const r=this._formatRequest({method:"eth_sign",params:t});return await this._sendCallRequest(r)}async signPersonalMessage(t){if(!this._connected)throw new Error(ae);t=ir(t);const r=this._formatRequest({method:"personal_sign",params:t});return await this._sendCallRequest(r)}async signTypedData(t){if(!this._connected)throw new Error(ae);const r=this._formatRequest({method:"eth_signTypedData",params:t});return await this._sendCallRequest(r)}async updateChain(t){if(!this._connected)throw new Error("Session currently disconnected");const r=this._formatRequest({method:"wallet_updateChain",params:[t]});return await this._sendCallRequest(r)}unsafeSend(t,r){return this._sendRequest(t,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:r}]}),new Promise((a,g)=>{this._subscribeToResponse(t.id,(f,x)=>{if(f){g(f);return}if(!x)throw new Error(Ki);a(x)})})}async sendCustomRequest(t,r){if(!this._connected)throw new Error(ae);switch(t.method){case"eth_accounts":return this.accounts;case"eth_chainId":return kr(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":t.params&&(t.params[0]=Ce(t.params[0]));break;case"personal_sign":t.params&&(t.params=ir(t.params));break}const a=this._formatRequest(t);return await this._sendCallRequest(a,r)}approveRequest(t){if(ge(t)){const r=this._formatResponse(t);this._sendResponse(r)}else throw new Error(Gi)}rejectRequest(t){if(ye(t)){const r=this._formatResponse(t);this._sendResponse(r)}else throw new Error(Ji)}transportClose(){this._transport.close()}async _sendRequest(t,r){const a=this._formatRequest(t),g=await this._encrypt(a),f=typeof(r==null?void 0:r.topic)<"u"?r.topic:this.peerId,x=JSON.stringify(g),T=typeof(r==null?void 0:r.forcePushNotification)<"u"?!r.forcePushNotification:Ai(a);this._transport.send(x,f,T)}async _sendResponse(t){const r=await this._encrypt(t),a=this.peerId,g=JSON.stringify(r);this._transport.send(g,a,!0)}async _sendSessionRequest(t,r,a){this._sendRequest(t,a),this._subscribeToSessionResponse(t.id,r)}_sendCallRequest(t,r){return this._sendRequest(t,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:r}]}),this._subscribeToCallResponse(t.id)}_formatRequest(t){if(typeof t.method>"u")throw new Error(Zi);return{id:typeof t.id>"u"?Si():t.id,jsonrpc:"2.0",method:t.method,params:typeof t.params>"u"?[]:t.params}}_formatResponse(t){if(typeof t.id>"u")throw new Error(Qi);const r={id:t.id,jsonrpc:"2.0"};if(ye(t)){const a=Bi(t.error);return Object.assign(Object.assign(Object.assign({},r),t),{error:a})}else if(ge(t))return Object.assign(Object.assign({},r),t);throw new Error(ar)}_handleSessionDisconnect(t){const r=t||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),mr(tr)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(t,r){r?r.approved?(this._connected?(r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),r.peerId&&!this.peerId&&(this.peerId=r.peerId),r.peerMeta&&!this.peerMeta&&(this.peerMeta=r.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(t):this._handleSessionDisconnect(t)}async _handleIncomingMessages(t){if(![this.clientId,this.handshakeTopic].includes(t.topic))return;let a;try{a=JSON.parse(t.payload)}catch{return}const g=await this._decrypt(a);g&&this._eventManager.trigger(g)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(t,r){this.on(`response:${t}`,r)}_subscribeToSessionResponse(t,r){this._subscribeToResponse(t,(a,g)=>{if(a){this._handleSessionResponse(a.message);return}ge(g)?this._handleSessionResponse(r,g.result):g.error&&g.error.message?this._handleSessionResponse(g.error.message):this._handleSessionResponse(r)})}_subscribeToCallResponse(t){return new Promise((r,a)=>{this._subscribeToResponse(t,(g,f)=>{if(g){a(g);return}ge(f)?r(f.result):f.error&&f.error.message?a(f.error):a(new Error(ar))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(t,r)=>{const{request:a}=r.params[0];if(mn()&&this._signingMethods.includes(a.method)){const g=gr(tr);g&&(window.location.href=g.href)}}),this.on("wc_sessionRequest",(t,r)=>{t&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:t.toString()}]}),this.handshakeId=r.id,this.peerId=r.params[0].peerId,this.peerMeta=r.params[0].peerMeta;const a=Object.assign(Object.assign({},r),{method:"session_request"});this._eventManager.trigger(a)}),this.on("wc_sessionUpdate",(t,r)=>{t&&this._handleSessionResponse(t.message),this._handleSessionResponse("Session disconnected",r.params[0])})}_initTransport(){this._transport.on("message",t=>this._handleIncomingMessages(t)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const t=this.protocol,r=this.handshakeTopic,a=this.version,g=encodeURIComponent(this.bridge),f=this.key;return`${t}:${r}@${a}?bridge=${g}&key=${f}`}_parseUri(t){const r=Ui(t);if(r.protocol===this.protocol){if(!r.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const a=r.handshakeTopic;if(!r.bridge)throw Error("Invalid or missing bridge url parameter value");const g=decodeURIComponent(r.bridge);if(!r.key)throw Error("Invalid or missing key parameter value");const f=r.key;return{handshakeTopic:a,bridge:g,key:f}}else throw new Error(Yi)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(t){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.encrypt(t,r):null}async _decrypt(t){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.decrypt(t,r):null}_getStorageSession(){let t=null;return this._sessionStorage&&(t=this._sessionStorage.getSession()),t}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(t){if(!t.url||typeof t.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!t.type||typeof t.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!t.token||typeof t.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const r={bridge:this.bridge,topic:this.clientId,type:t.type,token:t.token,peerName:"",language:t.language||""};this.on("connect",async(a,g)=>{if(a)throw a;if(t.peerMeta){const f=g.params[0].peerMeta.name;r.peerName=f}try{if(!(await(await fetch(`${t.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function ls(e){return pe.getBrowerCrypto().getRandomValues(new Uint8Array(e))}const Tr=256,Cr=Tr,ds=Tr,Vt="AES-CBC",ps=`SHA-${Cr}`,je="HMAC",gs="encrypt",ms="decrypt",vs="sign",ys="verify";function ws(e){return e===Vt?{length:Cr,name:Vt}:{hash:{name:ps},name:je}}function bs(e){return e===Vt?[gs,ms]:[vs,ys]}async function Je(e,t=Vt){return pe.getSubtleCrypto().importKey("raw",e,ws(t),!0,bs(t))}async function Ms(e,t,r){const a=pe.getSubtleCrypto(),g=await Je(t,Vt),f=await a.encrypt({iv:e,name:Vt},g,r);return new Uint8Array(f)}async function _s(e,t,r){const a=pe.getSubtleCrypto(),g=await Je(t,Vt),f=await a.decrypt({iv:e,name:Vt},g,r);return new Uint8Array(f)}async function Ss(e,t){const r=pe.getSubtleCrypto(),a=await Je(e,je),g=await r.sign({length:ds,name:je},a,t);return new Uint8Array(g)}function xs(e,t,r){return Ms(e,t,r)}function ks(e,t,r){return _s(e,t,r)}async function Nr(e,t){return await Ss(e,t)}async function Fr(e){const t=(e||256)/8,r=ls(t);return Kn(be(r))}async function Pr(e,t){const r=ce(e.data),a=ce(e.iv),g=ce(e.hmac),f=fe(g,!1),x=Sr(r,a),T=await Nr(t,x),E=fe(T,!1);return zt(f)===zt(E)}async function Os(e,t,r){const a=ue(Fe(t)),g=r||await Fr(128),f=ue(Fe(g)),x=fe(f,!1),T=JSON.stringify(e),E=Ln(T),R=await xs(f,a,E),H=fe(R,!1),z=Sr(R,f),D=await Nr(a,z),V=fe(D,!1);return{data:H,hmac:V,iv:x}}async function Rs(e,t){const r=ue(Fe(t));if(!r)throw new Error("Missing key: required for decryption");if(!await Pr(e,r))return null;const g=ce(e.data),f=ce(e.iv),x=await ks(f,r,g),T=Pn(x);let E;try{E=JSON.parse(T)}catch{return null}return E}const As=Object.freeze(Object.defineProperty({__proto__:null,decrypt:Rs,encrypt:Os,generateKey:Fr,verifyHmac:Pr},Symbol.toStringTag,{value:"Module"}));class Fs extends us{constructor(t,r){super({cryptoLib:As,connectorOpts:t,pushServerOpts:r})}}const Is={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},qr={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},At={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Bt={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ht={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class M{static getFirstMatch(t,r){const a=r.match(t);return a&&a.length>0&&a[1]||""}static getSecondMatch(t,r){const a=r.match(t);return a&&a.length>1&&a[2]||""}static matchAndReturnConst(t,r,a){if(t.test(r))return a}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(a=>parseInt(a,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(a=>parseInt(a,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,a=!1){const g=M.getVersionPrecision(t),f=M.getVersionPrecision(r);let x=Math.max(g,f),T=0;const E=M.map([t,r],R=>{const H=x-M.getVersionPrecision(R),z=R+new Array(H+1).join(".0");return M.map(z.split("."),D=>new Array(20-D.length).join("0")+D).reverse()});for(a&&(T=x-Math.min(g,f)),x-=1;x>=T;){if(E[0][x]>E[1][x])return 1;if(E[0][x]===E[1][x]){if(x===T)return 0;x-=1}else if(E[0][x]<E[1][x])return-1}}static map(t,r){const a=[];let g;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(g=0;g<t.length;g+=1)a.push(r(t[g]));return a}static find(t,r){let a,g;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(a=0,g=t.length;a<g;a+=1){const f=t[a];if(r(f,a))return f}}static assign(t,...r){const a=t;let g,f;if(Object.assign)return Object.assign(t,...r);for(g=0,f=r.length;g<f;g+=1){const x=r[g];typeof x=="object"&&x!==null&&Object.keys(x).forEach(E=>{a[E]=x[E]})}return t}static getBrowserAlias(t){return Is[t]}static getBrowserTypeByAlias(t){return qr[t]||""}}const K=/version\/(\d+(\.?_?\d+)+)/i,Es=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=M.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=M.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=M.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=M.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=M.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=M.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=M.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=M.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=M.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=M.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=M.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=M.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=M.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=M.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=M.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=M.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=M.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=M.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=M.getFirstMatch(K,e)||M.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=M.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=M.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=M.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=M.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=M.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=M.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=M.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=M.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=M.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=M.getFirstMatch(K,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,g=e.search("\\(")!==-1?r:t;return{name:M.getFirstMatch(g,e),version:M.getSecondMatch(g,e)}}}],Bs=[{test:[/Roku\/DVP/],describe(e){const t=M.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:Bt.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=M.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:Bt.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=M.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=M.getWindowsVersionName(t);return{name:Bt.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:Bt.iOS},r=M.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=M.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=M.getMacOSVersionName(t),a={name:Bt.MacOS,version:t};return r&&(a.versionName=r),a}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=M.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:Bt.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=M.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=M.getAndroidVersionName(t),a={name:Bt.Android,version:t};return r&&(a.versionName=r),a}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=M.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:Bt.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=M.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||M.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||M.getFirstMatch(/\bbb(\d+)/i,e);return{name:Bt.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=M.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:Bt.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=M.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:Bt.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:Bt.Linux}}},{test:[/CrOS/],describe(){return{name:Bt.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=M.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:Bt.PlayStation4,version:t}}}],Ts=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=M.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:At.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:At.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:At.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:At.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:At.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:At.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:At.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=M.getFirstMatch(/(ipod|iphone)/i,e);return{type:At.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:At.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:At.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:At.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:At.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:At.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:At.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:At.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:At.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:At.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:At.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:At.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:At.tv}}}],Cs=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Ht.Blink};const r=M.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ht.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:Ht.Trident},r=M.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Ht.Presto},r=M.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:Ht.Gecko},r=M.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ht.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Ht.WebKit},r=M.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class fr{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=M.find(Es,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(a=>this.test(a));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=M.find(Bs,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(a=>this.test(a));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=M.find(Ts,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(a=>this.test(a));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=M.find(Cs,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(a=>this.test(a));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return M.assign({},this.parsedResult)}satisfies(t){const r={};let a=0;const g={};let f=0;if(Object.keys(t).forEach(T=>{const E=t[T];typeof E=="string"?(g[T]=E,f+=1):typeof E=="object"&&(r[T]=E,a+=1)}),a>0){const T=Object.keys(r),E=M.find(T,H=>this.isOS(H));if(E){const H=this.satisfies(r[E]);if(H!==void 0)return H}const R=M.find(T,H=>this.isPlatform(H));if(R){const H=this.satisfies(r[R]);if(H!==void 0)return H}}if(f>0){const T=Object.keys(g),E=M.find(T,R=>this.isBrowser(R,!0));if(E!==void 0)return this.compareVersion(g[E])}}isBrowser(t,r=!1){const a=this.getBrowserName().toLowerCase();let g=t.toLowerCase();const f=M.getBrowserTypeByAlias(g);return r&&f&&(g=f.toLowerCase()),g===a}compareVersion(t){let r=[0],a=t,g=!1;const f=this.getBrowserVersion();if(typeof f=="string")return t[0]===">"||t[0]==="<"?(a=t.substr(1),t[1]==="="?(g=!0,a=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?a=t.substr(1):t[0]==="~"&&(g=!0,a=t.substr(1)),r.indexOf(M.compareVersions(f,a,g))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ps{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new fr(t,r)}static parse(t){return new fr(t).getResult()}static get BROWSER_MAP(){return qr}static get ENGINE_MAP(){return Ht}static get OS_MAP(){return Bt}static get PLATFORMS_MAP(){return At}}export{Ps as B,Fs as W};
